(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5673],{3485:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/you-might-not-need-typescript-project-references",function(){return o(5952)}])},4635:function(e,t,o){"use strict";o.d(t,{I:function(){return p}});var n=o(6042),r=o(5893),i=o(5675),a=o.n(i),s=function(e){var t=e.name,o=e.picture,n=e.twitterUsername;return(0,r.jsxs)("div",{className:"flex items-center flex-shrink-0 md:justify-start",children:[(0,r.jsx)("div",{className:"w-[32px] h-[32px]",children:(0,r.jsx)(a(),{src:o,height:32,width:32,layout:"fixed",loading:"lazy",title:t,className:"w-full rounded-full",alt:t})}),(0,r.jsxs)("dl",{className:"ml-2 text-sm font-medium leading-4 text-left whitespace-no-wrap",children:[(0,r.jsx)("dt",{className:"sr-only",children:"Name"}),(0,r.jsx)("dd",{className:"text-gray-900 dark:text-white",children:t}),(0,r.jsx)("dt",{className:"sr-only",children:"Twitter"}),(0,r.jsx)("dd",{children:(0,r.jsx)("a",{href:"https://twitter.com/".concat(n),className:"text-xs text-blue-500 no-underline betterhover:hover:text-blue-600 betterhover:hover:underline",target:"_blank",rel:"noopener noreferrer",children:"@".concat(n)})})]})]})},c=o(4184),d=o.n(c),l={jaredpalmer:{name:"Jared Palmer",twitterUsername:"jaredpalmer",picture:"/images/people/jaredpalmer_headshot.jpeg"},gaspargarcia_:{name:"Gaspar Garcia",twitterUsername:"gaspargarcia_",picture:"/images/people/gaspargarcia_.jpeg"},becca__z:{name:"Becca Z.",twitterUsername:"becca__z",picture:"/images/people/becca__z.jpeg"},gsoltis:{name:"Greg Soltis",twitterUsername:"gsoltis",picture:"/images/people/gsoltis.jpeg"},nathanhammond:{name:"Nathan Hammond",twitterUsername:"nathanhammond",picture:"/images/people/nathanhammond.png"},tknickman:{name:"Tom Knickman",twitterUsername:"tknickman",picture:"/images/people/tknickman.jpeg"},mehulkar:{name:"Mehul Kar",twitterUsername:"mehulkar",picture:"/images/people/mehulkar.jpeg"},mattpocock:{name:"Matt Pocock",twitterUsername:"mattpocockuk",picture:"/images/people/mattpocock.jpeg"}};function p(e){var t=e.authors,o=t.filter((function(e){return l[e]}));return(0,r.jsx)("div",{className:"w-full border-b border-gray-400 authors border-opacity-20",children:(0,r.jsx)("div",{className:d()("flex flex-wrap justify-center py-8 mx-auto gap-7",t.length>4&&"max-w-3xl"),children:o.map((function(e){return(0,r.jsx)(s,(0,n.Z)({},l[e]),e)}))})})}},5952:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return p.ZP}});var n,r=o(6042),i=o(9396),a=o(5893),s=o(6871),c=o(8583),d=(o(8658),o(1151)),l=(o(1608),o(4635)),p=o(5764),u={filePath:"pages/blog/you-might-not-need-typescript-project-references.mdx",route:"/blog/you-might-not-need-typescript-project-references",frontMatter:{title:"You might not need TypeScript project references",date:"2021/04/23",description:'As it turns out, you might not even references or even an interim TypeScript build step with a pattern I am about to show you, which I dub "internal packages."',tag:"web development",ogImage:"/images/blog/og-project-references.png"},pageMap:[{kind:"Meta",data:{"*":{type:"page"},index:{display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},repo:"Repo",pack:"Pack",blog:{title:"\u535a\u5ba2",theme:{typesetting:"article"}},showcase:"\u6848\u4f8b","official-website":{title:"\u5b98\u7f51",href:"https://turbo.build/",newWindow:!0},confirm:{title:"Confirm",display:"hidden"},terms:{title:"\u670d\u52a1\u6761\u6b3e",display:"hidden"},privacy:{title:"\u9690\u79c1\u653f\u7b56",display:"hidden"}}},{kind:"Folder",name:"blog",route:"/blog",children:[{kind:"Meta",data:{"*":{"//":"Hide all the links from the sidebar or navbar, and disable ToC and Sidebar for these pages.",display:"hidden",theme:{toc:!1,sidebar:!1,typesetting:"article"}},"turbo-1-6-0":"Turborepo 1.6","turbo-1-5-0":"Turborepo 1.5","turbo-1-4-0":"Turborepo 1.4","turbo-1-3-0":"Turborepo 1.3","turbo-1-2-0":"Turborepo 1.2","turbo-1-1-0":"Turborepo 1.1","joining-vercel":"Joining Vercel","saml-sso-now-available":"SAML SSO now available","you-might-not-need-typescript-project-references":"You might not need TypeScript project references","turbo-0-4-0":"Turborepo 0.4.0"}},{kind:"MdxPage",name:"joining-vercel",route:"/blog/joining-vercel",frontMatter:{title:"Turborepo is joining Vercel",date:"2021/12/09",description:"Turborepo is joining Vercel to make the web even faster.",tag:"web development",ogImage:"/og-image.png"}},{kind:"MdxPage",name:"saml-sso-now-available",route:"/blog/saml-sso-now-available",frontMatter:{title:"SAML SSO is now available",date:"2021/08/03",description:"SAML Single Sign-on (SSO) is now available to Enterprise customers thanks to our friends over at WorkOS.",tag:"web development",ogImage:"/images/blog/og-saml.png"}},{kind:"MdxPage",name:"turbo-0-4-0",route:"/blog/turbo-0-4-0",frontMatter:{title:"Turborepo 0.4.0",date:"2021/04/02",description:"Turborepo 0.4.0 introduces 10x faster hashing, pruned workspaces with sparse installs, a new pipeline configuration API, and improved cache control.",tag:"web development",ogImage:"/og-image.png"}},{kind:"MdxPage",name:"turbo-1-1-0",route:"/blog/turbo-1-1-0",frontMatter:{title:"Turborepo 1.1",date:"2022/01/31",description:"Turborepo 1.1 introduces automatic migrations, turbo.json configuration, environment variable dependencies, partial Yarn v2 support, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-1-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-2-0",route:"/blog/turbo-1-2-0",frontMatter:{title:"Turborepo 1.2",date:"2022/04/08",description:"Turborepo 1.2 introduces improved task filtering, artifact signing and integrity, human-readable and JSON dry runs, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-2-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-3-0",route:"/blog/turbo-1-3-0",frontMatter:{title:"Turborepo 1.3",date:"2022/06/23",description:"Turborepo 1.3 introduces restricted hash inputs, root script running and caching, new CI/CD Recipes, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-3-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-4-0",route:"/blog/turbo-1-4-0",frontMatter:{title:"Turborepo 1.4",date:"2022/08/09",description:"Turborepo 1.4 has new examples, automatically includes environment variables, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-4-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-5-0",route:"/blog/turbo-1-5-0",frontMatter:{title:"Turborepo 1.5",date:"2022/09/19",description:"Turborepo 1.5 brings the Monorepo Handbook, drops the 'run' command, improves pruning, and much more!",tag:"web development",ogImage:"/images/blog/turbo-1-5-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-6-0",route:"/blog/turbo-1-6-0",frontMatter:{title:"Turborepo 1.6",date:"2022/10/21",description:"Turborepo 1.6 lets you use Turborepo in non-monorepos, prune for npm, and improves cache performance.",tag:"web development",ogImage:"/images/blog/turbo-1-6-0/twitter-card.png"}},{kind:"MdxPage",name:"you-might-not-need-typescript-project-references",route:"/blog/you-might-not-need-typescript-project-references",frontMatter:{title:"You might not need TypeScript project references",date:"2021/04/23",description:'As it turns out, you might not even references or even an interim TypeScript build step with a pattern I am about to show you, which I dub "internal packages."',tag:"web development",ogImage:"/images/blog/og-project-references.png"}}]},{kind:"MdxPage",name:"blog",route:"/blog",frontMatter:{description:"The latest updates and releases from the Turbo team at Vercel.",type:"posts"}},{kind:"MdxPage",name:"confirm",route:"/confirm",frontMatter:{headeronly:!0,searchable:!1}},{kind:"MdxPage",name:"index",route:"/",frontMatter:{description:"Turbo is an incremental bundler and build system optimized for JavaScript and TypeScript, written in Rust."}},{kind:"Folder",name:"pack",route:"/pack",children:[{kind:"Meta",data:{index:{type:"page",display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},docs:{title:"\u6587\u6863",display:"children"}}},{kind:"Folder",name:"docs",route:"/pack/docs",children:[{kind:"Meta",data:{index:"Quickstart","why-turbopack":"Why Turbopack?","core-concepts":"Core Concepts",roadmap:"Roadmap",features:"Features",comparisons:"Comparisons",benchmarks:"Benchmarks","migrating-from-webpack":"Migrating from Webpack"}},{kind:"MdxPage",name:"benchmarks",route:"/pack/docs/benchmarks"},{kind:"Folder",name:"comparisons",route:"/pack/docs/comparisons",children:[{kind:"Meta",data:{"turbopack-vs-vite":"Turbopack vs. Vite","turbopack-vs-webpack":"Turbopack vs. Webpack"}},{kind:"MdxPage",name:"turbopack-vs-vite",route:"/pack/docs/comparisons/turbopack-vs-vite"},{kind:"MdxPage",name:"turbopack-vs-webpack",route:"/pack/docs/comparisons/turbopack-vs-webpack"}]},{kind:"MdxPage",name:"core-concepts",route:"/pack/docs/core-concepts",frontMatter:{title:"Core Concepts",description:"Learn about the innovative architecture that powers Turbopack's speed improvements."}},{kind:"Folder",name:"features",route:"/pack/docs/features",children:[{kind:"Meta",data:{javascript:"JavaScript",typescript:"TypeScript",frameworks:"Frameworks",css:"CSS","dev-server":"Dev Server","static-assets":"Static Assets",imports:"Imports","environment-variables":"Environment Variables"}},{kind:"MdxPage",name:"css",route:"/pack/docs/features/css"},{kind:"MdxPage",name:"dev-server",route:"/pack/docs/features/dev-server"},{kind:"MdxPage",name:"environment-variables",route:"/pack/docs/features/environment-variables"},{kind:"MdxPage",name:"frameworks",route:"/pack/docs/features/frameworks"},{kind:"MdxPage",name:"imports",route:"/pack/docs/features/imports"},{kind:"MdxPage",name:"javascript",route:"/pack/docs/features/javascript"},{kind:"MdxPage",name:"static-assets",route:"/pack/docs/features/static-assets"},{kind:"MdxPage",name:"typescript",route:"/pack/docs/features/typescript"}]},{kind:"MdxPage",name:"features",route:"/pack/docs/features",frontMatter:{title:"Features",description:"Learn about Turbopack's supported features"}},{kind:"MdxPage",name:"index",route:"/pack/docs",frontMatter:{title:"Turbopack Quickstart",description:"Start Building Web Applications with Turbopack"}},{kind:"MdxPage",name:"migrating-from-webpack",route:"/pack/docs/migrating-from-webpack",frontMatter:{title:"Migrate from Webpack to Turbopack",description:"Learn about how to migrate from Webpack to its Rust-powered successor, Turbopack."}},{kind:"MdxPage",name:"roadmap",route:"/pack/docs/roadmap"},{kind:"MdxPage",name:"why-turbopack",route:"/pack/docs/why-turbopack",frontMatter:{title:"Why Turbopack?",description:"Learn why we think Turbopack is the future of bundling for the web."}}]},{kind:"MdxPage",name:"index",route:"/pack",frontMatter:{overrideTitle:"Turbopack - The successor to Webpack",description:"Turbopack is an incremental bundler optimized for JavaScript and TypeScript, written in Rust."}}]},{kind:"MdxPage",name:"privacy",route:"/privacy",frontMatter:{description:"See our privacy policy and how it relates to you.",hidden:!0,headeronly:!0,container:!0,searchable:!1}},{kind:"Folder",name:"repo",route:"/repo",children:[{kind:"Meta",data:{index:{type:"page",display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},docs:{title:"Docs",display:"children"}}},{kind:"Folder",name:"docs",route:"/repo/docs",children:[{kind:"Meta",data:{index:{title:"\u5feb\u901f\u5f00\u59cb"},"getting-started":"\u5165\u95e8","core-concepts":"\u6838\u5fc3\u6982\u5ff5",handbook:"Monorepo \u624b\u518c",ci:"CI Recipes",reference:"API \u53c2\u8003",changelog:{title:"\u4fee\u6539\u8bb0\u5f55",href:"https://github.com/vercel/turbo/releases",newWindow:!0},"upgrading-to-v1":"\u5347\u7ea7\u5230 v1",troubleshooting:"\u6545\u969c\u6392\u9664",acknowledgements:"\u81f4\u8c22",faq:"FAQ"}},{kind:"MdxPage",name:"acknowledgements",route:"/repo/docs/acknowledgements",frontMatter:{title:"Acknowledgements and Prior Art",description:"Thank you to all these developers, build systems, and monorepo tools for their support and assistance."}},{kind:"Folder",name:"ci",route:"/repo/docs/ci",children:[{kind:"Meta",data:{circleci:"CircleCI","github-actions":"GitHub Actions",gitlabci:"GitLab CI",travisci:"Travis CI"}},{kind:"MdxPage",name:"circleci",route:"/repo/docs/ci/circleci",frontMatter:{title:"Using Turborepo with CircleCI",description:"How to use CircleCI with Turborepo to optimize your CI workflow"}},{kind:"MdxPage",name:"github-actions",route:"/repo/docs/ci/github-actions",frontMatter:{title:"Using Turborepo with GitHub Actions",description:"How to use GitHub Actions with Turborepo to optimize your CI workflow"}},{kind:"MdxPage",name:"gitlabci",route:"/repo/docs/ci/gitlabci",frontMatter:{title:"Using Turborepo with GitLab CI",description:"How to use GitLab CI with Turborepo to optimize your CI workflow"}},{kind:"MdxPage",name:"travisci",route:"/repo/docs/ci/travisci",frontMatter:{title:"Using Turborepo with Travis CI",description:"How to use Travis CI with Turborepo to optimize your CI workflow"}}]},{kind:"MdxPage",name:"ci",route:"/repo/docs/ci",frontMatter:{title:"Continuous Integration",description:"Recipes for using Turborepo with GitHub Actions, CircleCI, and other continuous integration providers."}},{kind:"Folder",name:"core-concepts",route:"/repo/docs/core-concepts",children:[{kind:"Meta",data:{caching:"Caching Tasks","remote-caching":"Remote Caching",monorepos:"Monorepos",scopes:{display:"hidden"}}},{kind:"MdxPage",name:"caching",route:"/repo/docs/core-concepts/caching",frontMatter:{title:"Caching",description:"Caching allows Turborepo to skip work that's already been done, for the fastest builds."}},{kind:"Folder",name:"monorepos",route:"/repo/docs/core-concepts/monorepos",children:[{kind:"Meta",data:{"running-tasks":"Running Tasks",filtering:"Filtering Workspaces"}},{kind:"MdxPage",name:"filtering",route:"/repo/docs/core-concepts/monorepos/filtering",frontMatter:{title:"Filtering Workspaces",description:"Only build the workspaces you care about"}},{kind:"MdxPage",name:"running-tasks",route:"/repo/docs/core-concepts/monorepos/running-tasks",frontMatter:{title:"Running Tasks",description:"Turborepo helps you specify task dependencies declaratively."}}]},{kind:"MdxPage",name:"monorepos",route:"/repo/docs/core-concepts/monorepos"},{kind:"MdxPage",name:"remote-caching",route:"/repo/docs/core-concepts/remote-caching",frontMatter:{title:"Remote Caching",description:"Share cache artifacts across machines for even faster builds."}},{kind:"MdxPage",name:"scopes",route:"/repo/docs/core-concepts/scopes",frontMatter:{title:"Scoped tasks",description:"Even faster Turborepo builds with scoped tasks.",searchable:!1}}]},{kind:"MdxPage",name:"faq",route:"/repo/docs/faq",frontMatter:{title:"Frequently Asked Questions",description:"Frequently asked questions about Turborepo."}},{kind:"Folder",name:"getting-started",route:"/repo/docs/getting-started",children:[{kind:"Meta",data:{"add-to-project":"Add to Existing Project","create-new":"Create a New Monorepo","existing-monorepo":"Add to Existing Monorepo"}},{kind:"MdxPage",name:"add-to-project",route:"/repo/docs/getting-started/add-to-project"},{kind:"MdxPage",name:"create-new",route:"/repo/docs/getting-started/create-new",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}},{kind:"MdxPage",name:"existing-monorepo",route:"/repo/docs/getting-started/existing-monorepo",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}}]},{kind:"Folder",name:"handbook",route:"/repo/docs/handbook",children:[{kind:"Meta",data:{"what-is-a-monorepo":"What is a Monorepo?","package-installation":"Package Installation",workspaces:"Workspaces","migrating-to-a-monorepo":"Migrating to a Monorepo",dev:"Development Tasks","building-your-app":"Building Your App","deploying-with-docker":"Deploying with Docker","sharing-code":"Sharing Code",linting:"Linting",testing:"Testing","publishing-packages":"Publishing Packages",troubleshooting:"Troubleshooting"}},{kind:"MdxPage",name:"building-your-app",route:"/repo/docs/handbook/building-your-app"},{kind:"MdxPage",name:"deploying-with-docker",route:"/repo/docs/handbook/deploying-with-docker"},{kind:"MdxPage",name:"dev",route:"/repo/docs/handbook/dev"},{kind:"Folder",name:"linting",route:"/repo/docs/handbook/linting",children:[{kind:"Meta",data:{typescript:"TypeScript",eslint:"ESLint"}},{kind:"MdxPage",name:"eslint",route:"/repo/docs/handbook/linting/eslint"},{kind:"MdxPage",name:"typescript",route:"/repo/docs/handbook/linting/typescript"}]},{kind:"MdxPage",name:"linting",route:"/repo/docs/handbook/linting"},{kind:"MdxPage",name:"migrating-to-a-monorepo",route:"/repo/docs/handbook/migrating-to-a-monorepo"},{kind:"MdxPage",name:"package-installation",route:"/repo/docs/handbook/package-installation"},{kind:"Folder",name:"publishing-packages",route:"/repo/docs/handbook/publishing-packages",children:[{kind:"Meta",data:{bundling:"Bundling","versioning-and-publishing":"Versioning and Publishing"}},{kind:"MdxPage",name:"bundling",route:"/repo/docs/handbook/publishing-packages/bundling"},{kind:"MdxPage",name:"versioning-and-publishing",route:"/repo/docs/handbook/publishing-packages/versioning-and-publishing"}]},{kind:"MdxPage",name:"publishing-packages",route:"/repo/docs/handbook/publishing-packages"},{kind:"Folder",name:"sharing-code",route:"/repo/docs/handbook/sharing-code",children:[{kind:"Meta",data:{"internal-packages":"Internal Packages"}},{kind:"MdxPage",name:"internal-packages",route:"/repo/docs/handbook/sharing-code/internal-packages"}]},{kind:"MdxPage",name:"sharing-code",route:"/repo/docs/handbook/sharing-code"},{kind:"MdxPage",name:"testing",route:"/repo/docs/handbook/testing"},{kind:"MdxPage",name:"troubleshooting",route:"/repo/docs/handbook/troubleshooting"},{kind:"MdxPage",name:"what-is-a-monorepo",route:"/repo/docs/handbook/what-is-a-monorepo"},{kind:"MdxPage",name:"workspaces",route:"/repo/docs/handbook/workspaces"}]},{kind:"MdxPage",name:"handbook",route:"/repo/docs/handbook",frontMatter:{title:"Monorepo Handbook",description:"The missing manual on how to set up and use your monorepo."}},{kind:"MdxPage",name:"index",route:"/repo/docs",frontMatter:{title:"Turborepo \u5feb\u901f\u5f00\u59cb",description:"\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a monorepo \u6216\u5c06 Turborepo \u6dfb\u52a0\u5230\u73b0\u6709\u9879\u76ee."}},{kind:"Folder",name:"reference",route:"/repo/docs/reference",children:[{kind:"Meta",data:{configuration:"Configuration Options","command-line-reference":"CLI Usage",codemods:"Codemods"}},{kind:"MdxPage",name:"codemods",route:"/repo/docs/reference/codemods",frontMatter:{title:"Turborepo Codemods",description:"To make upgrading easier, Turborepo includes codemods and migration scripts."}},{kind:"MdxPage",name:"command-line-reference",route:"/repo/docs/reference/command-line-reference",frontMatter:{title:"CLI Reference",description:"Turborepo is a high-performance build system for JavaScript and TypeScript codebases."}},{kind:"MdxPage",name:"configuration",route:"/repo/docs/reference/configuration",frontMatter:{title:"Configuration Options - turbo.json",description:"Learn how to configure Turborepo through `turbo.json`."}}]},{kind:"MdxPage",name:"troubleshooting",route:"/repo/docs/troubleshooting",frontMatter:{title:"Troubleshooting",description:"This guide aims to help you debug issues with your Turborepo builds and configuration."}},{kind:"MdxPage",name:"upgrading-to-v1",route:"/repo/docs/upgrading-to-v1",frontMatter:{title:"Upgrading to v1",description:"Learn how to upgrade to Turborepo v1, now open-source and part of Vercel."}}]},{kind:"MdxPage",name:"index",route:"/repo",frontMatter:{description:"Turborepo is a high-performance build system for JavaScript and TypeScript codebases."}}]},{kind:"MdxPage",name:"showcase",route:"/showcase",frontMatter:{headeronly:!0,searchable:!1,description:"Turborepo by Vercel is the one of the fastest growing build systems in the frontend ecosystem. It's trusted by thousands of developers in production including teams at Vercel, AWS, Netflix, Microsoft, Disney, and more."}},{kind:"MdxPage",name:"terms",route:"/terms",frontMatter:{description:"See our terms of our service and how they relate to you.",hidden:!0,headeronly:!0,container:!0,searchable:!1}}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"You might not need TypeScript project references",position:{start:{line:2,column:3,offset:3},end:{line:2,column:51,offset:51}}}],position:{start:{line:2,column:1,offset:1},end:{line:2,column:51,offset:51}},value:"You might not need TypeScript project references"},{type:"heading",depth:2,children:[{type:"text",value:'"Internal" TypeScript Packages',position:{start:{line:21,column:4,offset:1257},end:{line:21,column:34,offset:1287}}}],position:{start:{line:21,column:1,offset:1254},end:{line:21,column:34,offset:1287}},value:'"Internal" TypeScript Packages'},{type:"heading",depth:3,children:[{type:"text",value:"Next.js",position:{start:{line:50,column:5,offset:2822},end:{line:50,column:12,offset:2829}}}],position:{start:{line:50,column:1,offset:2818},end:{line:50,column:12,offset:2829}},value:"Next.js"},{type:"heading",depth:3,children:[{type:"text",value:"Vite",position:{start:{line:54,column:5,offset:3031},end:{line:54,column:9,offset:3035}}}],position:{start:{line:54,column:1,offset:3027},end:{line:54,column:9,offset:3035}},value:"Vite"},{type:"heading",depth:3,children:[{type:"text",value:"React Native",position:{start:{line:58,column:5,offset:3098},end:{line:58,column:17,offset:3110}}}],position:{start:{line:58,column:1,offset:3094},end:{line:58,column:17,offset:3110}},value:"React Native"},{type:"heading",depth:2,children:[{type:"text",value:"The beauty of this pattern",position:{start:{line:64,column:4,offset:3813},end:{line:64,column:30,offset:3839}}}],position:{start:{line:64,column:1,offset:3810},end:{line:64,column:30,offset:3839}},value:"The beauty of this pattern"},{type:"heading",depth:2,children:[{type:"text",value:"Caveats",position:{start:{line:68,column:4,offset:4029},end:{line:68,column:11,offset:4036}}}],position:{start:{line:68,column:1,offset:4026},end:{line:68,column:11,offset:4036}},value:"Caveats"},{type:"heading",depth:2,children:[{type:"text",value:"Speaking of long build times...",position:{start:{line:74,column:4,offset:5084},end:{line:74,column:35,offset:5115}}}],position:{start:{line:74,column:1,offset:5081},end:{line:74,column:35,offset:5115}},value:"Speaking of long build times..."}],unstable_flexsearch:!0};globalThis.__nextra_internal__={pageMap:u.pageMap,route:u.route};function h(e){var t=Object.assign({h1:"h1",p:"p",a:"a",code:"code",ul:"ul",li:"li",h2:"h2",strong:"strong",em:"em",div:"div",pre:"pre",span:"span",h3:"h3"},(0,d.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{children:"You might not need TypeScript project references"}),"\n","\n",(0,a.jsx)(l.I,{authors:["jaredpalmer"]}),"\n",(0,a.jsxs)(t.p,{children:["If you've worked in a larger TypeScript codebase or monorepo, you are likely familiar with ",(0,a.jsx)(t.a,{href:"https://www.typescriptlang.org/docs/handbook/project-references.html",title:"TypeScript Project References Documentation",children:"project references"}),". They are indeed fairly powerful."]}),"\n",(0,a.jsxs)(t.p,{children:["When you reference a project in your ",(0,a.jsx)(t.code,{children:"tsconfig.json"}),", new things happen:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Importing modules from a referenced project will instead load its output declaration file (",(0,a.jsx)(t.code,{children:".d.ts"}),")"]}),"\n",(0,a.jsxs)(t.li,{children:["If the referenced project produces an ",(0,a.jsx)(t.code,{children:"outFile"}),", the output file ",(0,a.jsx)(t.code,{children:".d.ts"})," file\u2019s declarations will be visible in this project"]}),"\n",(0,a.jsxs)(t.li,{children:["Running build mode (",(0,a.jsx)(t.code,{children:"tsc -b"}),") will automatically build the referenced project if it hasn't been built but is needed"]}),"\n",(0,a.jsx)(t.li,{children:"By separating into multiple projects, you can greatly improve the speed of typechecking and compiling, reduce memory usage when using an editor, and improve enforcement of the logical groupings of your program."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Sounds awesome! Right?! Well...maybe. Once you add references to your project you now need to continuously update them whenever you add or remove packages. That kinda blows."}),"\n",(0,a.jsx)(t.p,{children:"Well...what if you didn't need to?"}),"\n",(0,a.jsx)(t.h2,{id:"internal-typescript-packages",children:'"Internal" TypeScript Packages'}),"\n",(0,a.jsx)(t.p,{children:'As it turns out, you might not even need references or even an interim TypeScript build step with a pattern I am about to show you, which I dub "internal packages."'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsxs)(t.strong,{children:['An "internal package" is a TypeScript package without a ',(0,a.jsx)(t.code,{children:"tsconfig.json"})," with ",(0,a.jsx)(t.em,{children:"both"})," its ",(0,a.jsx)(t.code,{children:"types"})," and ",(0,a.jsx)(t.code,{children:"main"})," fields in its ",(0,a.jsx)(t.code,{children:"package.json"})," pointing to the package's untranspiled entry point (e.g. ",(0,a.jsx)(t.code,{children:"./src/index.tsx"}),")."]})}),"\n",(0,a.jsx)(t.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(t.pre,{children:(0,a.jsxs)(t.code,{"data-language":"json","data-theme":"default",children:[(0,a.jsx)(t.span,{className:"line",children:(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:'"name"'}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"@sample/my-internal-package"'})]}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"main"'}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:": "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./src/index.ts"'})]}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"types"'}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:": "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./src/index.ts"'}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-comment)"},children:"// yes, this works!"})]}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependencies"'}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,a.jsx)(t.span,{className:"line",children:(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    ..."})}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"  }"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,a.jsxs)(t.span,{className:"line",children:[(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:'"devDependencies"'}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,a.jsx)(t.span,{className:"line",children:(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    ..."})}),"\n",(0,a.jsx)(t.span,{className:"line",children:(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,a.jsx)(t.span,{className:"line",children:(0,a.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,a.jsxs)(t.p,{children:["As it turns out, the TypeScript Language Server (in VSCode) and Type Checker can treat both a raw ",(0,a.jsx)(t.code,{children:".ts"})," or ",(0,a.jsx)(t.code,{children:".tsx"})," file as its own valid type declaration. This last sentence is obvious once you read it twice. What isn't so obvious, though, is that you can point the ",(0,a.jsx)(t.code,{children:"types"})," field directly to raw source code."]}),"\n",(0,a.jsxs)(t.p,{children:["Once you do this, this package can then be used ",(0,a.jsx)(t.em,{children:"without"})," project references or a TypeScript build step (either via ",(0,a.jsx)(t.code,{children:"tsc"})," or ",(0,a.jsx)(t.code,{children:"esbuild"})," etc) as long as you adhere to 2 rules:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.strong,{children:"The consuming application of an internal package must transpile and typecheck it."})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.strong,{children:"You should never publish an internal package to npm."})}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"As far as I can tell, this internal package pattern works with all yarn/npm/pnpm workspace implementations regardless of whether you are using Turborepo or some other tool. I have personally tested this pattern with several different meta frameworks (see below), but I'm sure that it works with others as well."}),"\n",(0,a.jsx)(t.h3,{id:"nextjs",children:"Next.js"}),"\n",(0,a.jsxs)(t.p,{children:["If you use Next.js, you can satisfy these constraints with the ",(0,a.jsx)(t.code,{children:"next-transpile-modules"})," plugin which will tell Next.js to run certain dependencies through its Webpack/Babel/TypeScript pipelines."]}),"\n",(0,a.jsx)(t.h3,{id:"vite",children:"Vite"}),"\n",(0,a.jsx)(t.p,{children:"Internal packages just work. No extra config is needed."}),"\n",(0,a.jsx)(t.h3,{id:"react-native",children:"React Native"}),"\n",(0,a.jsxs)(t.p,{children:["If you use ",(0,a.jsx)(t.a,{href:"https://expo.io",children:"Expo"})," and use the ",(0,a.jsx)(t.a,{href:"https://github.com/expo/expo/tree/master/packages/expo-yarn-workspaces",children:(0,a.jsx)(t.code,{children:"expo-yarn-workspaces"})})," or ",(0,a.jsx)(t.a,{href:"https://www.npmjs.com/package/@turborepo/adapter-expo",children:(0,a.jsx)(t.code,{children:"@turborepo/adapter-expo"})})," package, you can use internal packages as long as you are targeting iOS or Android. When you run Expo for these platforms, all of ",(0,a.jsx)(t.code,{children:"node_modules"})," are automatically transpiled with ",(0,a.jsx)(t.a,{href:"https://facebook.github.io/metro/",children:"Metro"}),". However, if you are targeting Expo for web, internal packages will not work because ",(0,a.jsx)(t.code,{children:"node_modules"})," are oddly not transpiled for web."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.em,{children:"I reached out to the Expo team about this inconsistency. They are aware of it. It's a legacy wart I'm told."})}),"\n",(0,a.jsx)(t.h2,{id:"the-beauty-of-this-pattern",children:"The beauty of this pattern"}),"\n",(0,a.jsx)(t.p,{children:"This pattern rocks because it saves you from extra needless or duplicative build steps. It also gives you all the editor benefits of project references, but without any configuration."}),"\n",(0,a.jsx)(t.h2,{id:"caveats",children:"Caveats"}),"\n",(0,a.jsxs)(t.p,{children:['When you use an internal package, it\'s kind of like telling the consuming application that you have another source directory\u2014which has pros and cons. As your consuming application(s) grow, adding more internal packages is identical to adding more source code to that consuming application. Thus, when you add more source code, there is more code to transpile/bundle/typecheck...so this can result in slower builds of the consuming application (as there is just more work to do) but potentially faster (and less complicated) overall build time. When/if overall build time begins to suffer, you might decide to convert your larger internal packages back into "regular" packages with ',(0,a.jsx)(t.code,{children:".d.ts"})," files and with normal TypeScript build steps."]}),"\n",(0,a.jsx)(t.p,{children:"As previously mentioned, this pattern actually has very little to do with Turborepo. It's just super duper awesome and I think you should be aware of it. As we are actively working on preset package build rules (i.e. \"builders\") for Turborepo, we'll using the internal package pattern to skip build steps."}),"\n",(0,a.jsx)(t.h2,{id:"speaking-of-long-build-times",children:"Speaking of long build times..."}),"\n",(0,a.jsxs)(t.p,{children:["Shameless plug here. If you are reading this post, and you're struggling with slow build and test times, I'd love to show you how Turborepo can help. I guarantee that Turborepo will cut your monorepo's build time by 50% or more. ",(0,a.jsx)(t.a,{href:"https://vercel.com/contact/turborepo?utm_source=turbo-pack.cn&utm_medium=referral&utm_campaign=blog-project-references",children:"You can request a live demo right here."})]})]})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(0,d.ah)(),e.components),o=t.wrapper;return o?(0,a.jsx)(o,(0,i.Z)((0,r.Z)({},e),{children:(0,a.jsx)(h,(0,r.Z)({},e))})):h(e)}u.title="You might not need TypeScript project references";(n=globalThis).__nextra_pageContext__||(n.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/blog/you-might-not-need-typescript-project-references"]={Content:function(e){return(0,a.jsx)(s.mK.Provider,{value:e,children:(0,a.jsx)(g,{})})},pageOpts:u,themeConfig:c.Z}}},function(e){e.O(0,[8002,5675,8583,9774,2888,179],(function(){return t=3485,e(e.s=t);var t}));var t=e.O();_N_E=t}]);