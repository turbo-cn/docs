(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1090],{4947:function(e,s,n){const o=n(7294);const r=o.forwardRef((function(e,s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:s},e),o.createElement("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"}))}));e.exports=r},3318:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/repo/docs/core-concepts/monorepos/running-tasks",function(){return n(7622)}])},5449:function(e,s,n){"use strict";n.d(s,{Z:function(){return d}});var o=n(5893),r=n(7294);var t=r.forwardRef((function(e,s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:s},e),r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"}))}));var i=r.forwardRef((function(e,s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:s},e),r.createElement("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"}))}));var a=r.forwardRef((function(e,s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:s},e),r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))}));var l=r.forwardRef((function(e,s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:s},e),r.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))})),c={info:{classes:"bg-blue-100 text-blue-800 dark:text-blue-300 dark:bg-blue-200 dark:bg-opacity-10",icon:(0,o.jsx)(t,{className:"w-5 h-5 mt-1"})},idea:{classes:"bg-gray-100 text-gray-800 dark:text-gray-300 dark:bg-gray-200 dark:bg-opacity-10",icon:(0,o.jsx)(i,{className:"w-5 h-5 mt-1"})},error:{classes:"bg-red-200 text-red-900 dark:text-red-200 dark:bg-red-600 dark:bg-opacity-30",icon:(0,o.jsx)(a,{className:"w-5 h-5 mt-1"})},default:{classes:"bg-orange-100 text-orange-800 dark:text-orange-300 dark:bg-orange-200 dark:bg-opacity-10",icon:(0,o.jsx)(l,{className:"w-5 h-5 mt-1"})}};function d(e){var s=e.children,n=e.type,r=void 0===n?"default":n,t=e.icon;return(0,o.jsxs)("div",{className:"".concat(c[r].classes," flex rounded-lg callout mt-6"),children:[(0,o.jsx)("div",{className:"py-2 pl-3 pr-2 text-xl select-none",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},children:t||c[r].icon}),(0,o.jsx)("div",{className:"py-2 pr-4 overflow-auto",children:s})]})}},7622:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return y.ZP}});var o,r=n(6042),t=n(9396),i=n(5893),a=n(6871),l=n(8583),c=(n(8658),n(1151)),d=n(1608),h=n.n(d),p={src:"/_next/static/media/your-monorepo-excalidraw.ccf1c6c1.png",height:850,width:1896,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAaklEQVR42gUAWQqEINSPKWRoFmUSw9mwggiq16K2fbwWuv+RgvjehdLrnQsYVmNc4PkPSjljpILOjphot9jdRsWmYWoc4yFpwaHB4te32WxEeeQTdqhukuh3At9aPZV4ScnC+JPW/yYK5AmdBg3MMusMDgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4},x={src:"/_next/static/media/yarn-workspaces-excalidraw.0838365d.png",height:742,width:1556,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAa0lEQVR42mPQNzA2MjKQkDFhkFAMFhWxEbPSFLFm4GdgsLJxCQ0OUbQIiTaIrpLWCpWyCpfN1xIyYTBUULY2tVBSNbIwCLJQMs5QULWRc7KT8Wdg5QNqYxBRtHDVMfXQ8WSR12UWZmASZgAAdcgQltl7US8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:4},u={src:"/_next/static/media/turborepo-excalidraw.8068f4b4.png",height:896,width:1556,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAg0lEQVR42gUAMQ6CMPDCjrRnNU0gXBDUICVHUmDo0ISkLjI54eDEpKOTT/DbBno7DraJ8vlVhIAJ4HYvUUoJ3HsX3OK+z3odUrT6mCstJQJXPE7+7T4/s87EU9qdVCaEAKaSL0V3fiz1PRxaJlNmpLWGKN5EAAkZ39qruVXUCIyV2v0BIqwTzHbbx2MAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5},k=n(5449),j=n(4947),m=n.n(j),y=n(5764),g={filePath:"pages/repo/docs/core-concepts/monorepos/running-tasks.mdx",route:"/repo/docs/core-concepts/monorepos/running-tasks",frontMatter:{title:"Running Tasks",description:"Turborepo helps you specify task dependencies declaratively."},pageMap:[{kind:"Meta",data:{"*":{type:"page"},index:{display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},repo:"Repo",pack:"Pack",blog:{title:"\u535a\u5ba2",theme:{typesetting:"article"}},showcase:"\u6848\u4f8b","official-website":{title:"\u5b98\u7f51",href:"https://turbo.build/",newWindow:!0},confirm:{title:"Confirm",display:"hidden"},terms:{title:"\u670d\u52a1\u6761\u6b3e",display:"hidden"},privacy:{title:"\u9690\u79c1\u653f\u7b56",display:"hidden"}}},{kind:"Folder",name:"blog",route:"/blog",children:[{kind:"Meta",data:{"*":{"//":"Hide all the links from the sidebar or navbar, and disable ToC and Sidebar for these pages.",display:"hidden",theme:{toc:!1,sidebar:!1,typesetting:"article"}},"turbo-1-6-0":"Turborepo 1.6","turbo-1-5-0":"Turborepo 1.5","turbo-1-4-0":"Turborepo 1.4","turbo-1-3-0":"Turborepo 1.3","turbo-1-2-0":"Turborepo 1.2","turbo-1-1-0":"Turborepo 1.1","joining-vercel":"Joining Vercel","saml-sso-now-available":"SAML SSO now available","you-might-not-need-typescript-project-references":"You might not need TypeScript project references","turbo-0-4-0":"Turborepo 0.4.0"}},{kind:"MdxPage",name:"joining-vercel",route:"/blog/joining-vercel",frontMatter:{title:"Turborepo is joining Vercel",date:"2021/12/09",description:"Turborepo is joining Vercel to make the web even faster.",tag:"web development",ogImage:"/og-image.png"}},{kind:"MdxPage",name:"saml-sso-now-available",route:"/blog/saml-sso-now-available",frontMatter:{title:"SAML SSO is now available",date:"2021/08/03",description:"SAML Single Sign-on (SSO) is now available to Enterprise customers thanks to our friends over at WorkOS.",tag:"web development",ogImage:"/images/blog/og-saml.png"}},{kind:"MdxPage",name:"turbo-0-4-0",route:"/blog/turbo-0-4-0",frontMatter:{title:"Turborepo 0.4.0",date:"2021/04/02",description:"Turborepo 0.4.0 introduces 10x faster hashing, pruned workspaces with sparse installs, a new pipeline configuration API, and improved cache control.",tag:"web development",ogImage:"/og-image.png"}},{kind:"MdxPage",name:"turbo-1-1-0",route:"/blog/turbo-1-1-0",frontMatter:{title:"Turborepo 1.1",date:"2022/01/31",description:"Turborepo 1.1 introduces automatic migrations, turbo.json configuration, environment variable dependencies, partial Yarn v2 support, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-1-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-2-0",route:"/blog/turbo-1-2-0",frontMatter:{title:"Turborepo 1.2",date:"2022/04/08",description:"Turborepo 1.2 introduces improved task filtering, artifact signing and integrity, human-readable and JSON dry runs, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-2-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-3-0",route:"/blog/turbo-1-3-0",frontMatter:{title:"Turborepo 1.3",date:"2022/06/23",description:"Turborepo 1.3 introduces restricted hash inputs, root script running and caching, new CI/CD Recipes, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-3-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-4-0",route:"/blog/turbo-1-4-0",frontMatter:{title:"Turborepo 1.4",date:"2022/08/09",description:"Turborepo 1.4 has new examples, automatically includes environment variables, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-4-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-5-0",route:"/blog/turbo-1-5-0",frontMatter:{title:"Turborepo 1.5",date:"2022/09/19",description:"Turborepo 1.5 brings the Monorepo Handbook, drops the 'run' command, improves pruning, and much more!",tag:"web development",ogImage:"/images/blog/turbo-1-5-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-6-0",route:"/blog/turbo-1-6-0",frontMatter:{title:"Turborepo 1.6",date:"2022/10/21",description:"Turborepo 1.6 lets you use Turborepo in non-monorepos, prune for npm, and improves cache performance.",tag:"web development",ogImage:"/images/blog/turbo-1-6-0/twitter-card.png"}},{kind:"MdxPage",name:"you-might-not-need-typescript-project-references",route:"/blog/you-might-not-need-typescript-project-references",frontMatter:{title:"You might not need TypeScript project references",date:"2021/04/23",description:'As it turns out, you might not even references or even an interim TypeScript build step with a pattern I am about to show you, which I dub "internal packages."',tag:"web development",ogImage:"/images/blog/og-project-references.png"}}]},{kind:"MdxPage",name:"blog",route:"/blog",frontMatter:{description:"The latest updates and releases from the Turbo team at Vercel.",type:"posts"}},{kind:"MdxPage",name:"confirm",route:"/confirm",frontMatter:{headeronly:!0,searchable:!1}},{kind:"MdxPage",name:"index",route:"/",frontMatter:{description:"Turbo is an incremental bundler and build system optimized for JavaScript and TypeScript, written in Rust."}},{kind:"Folder",name:"pack",route:"/pack",children:[{kind:"Meta",data:{index:{type:"page",display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},docs:{title:"\u6587\u6863",display:"children"}}},{kind:"Folder",name:"docs",route:"/pack/docs",children:[{kind:"Meta",data:{index:"Quickstart","why-turbopack":"Why Turbopack?","core-concepts":"Core Concepts",roadmap:"Roadmap",features:"Features",comparisons:"Comparisons",benchmarks:"Benchmarks","migrating-from-webpack":"Migrating from Webpack"}},{kind:"MdxPage",name:"benchmarks",route:"/pack/docs/benchmarks"},{kind:"Folder",name:"comparisons",route:"/pack/docs/comparisons",children:[{kind:"Meta",data:{"turbopack-vs-vite":"Turbopack vs. Vite","turbopack-vs-webpack":"Turbopack vs. Webpack"}},{kind:"MdxPage",name:"turbopack-vs-vite",route:"/pack/docs/comparisons/turbopack-vs-vite"},{kind:"MdxPage",name:"turbopack-vs-webpack",route:"/pack/docs/comparisons/turbopack-vs-webpack"}]},{kind:"MdxPage",name:"core-concepts",route:"/pack/docs/core-concepts",frontMatter:{title:"Core Concepts",description:"Learn about the innovative architecture that powers Turbopack's speed improvements."}},{kind:"Folder",name:"features",route:"/pack/docs/features",children:[{kind:"Meta",data:{javascript:"JavaScript",typescript:"TypeScript",frameworks:"Frameworks",css:"CSS","dev-server":"Dev Server","static-assets":"Static Assets",imports:"Imports","environment-variables":"Environment Variables"}},{kind:"MdxPage",name:"css",route:"/pack/docs/features/css"},{kind:"MdxPage",name:"dev-server",route:"/pack/docs/features/dev-server"},{kind:"MdxPage",name:"environment-variables",route:"/pack/docs/features/environment-variables"},{kind:"MdxPage",name:"frameworks",route:"/pack/docs/features/frameworks"},{kind:"MdxPage",name:"imports",route:"/pack/docs/features/imports"},{kind:"MdxPage",name:"javascript",route:"/pack/docs/features/javascript"},{kind:"MdxPage",name:"static-assets",route:"/pack/docs/features/static-assets"},{kind:"MdxPage",name:"typescript",route:"/pack/docs/features/typescript"}]},{kind:"MdxPage",name:"features",route:"/pack/docs/features",frontMatter:{title:"Features",description:"Learn about Turbopack's supported features"}},{kind:"MdxPage",name:"index",route:"/pack/docs",frontMatter:{title:"Turbopack Quickstart",description:"Start Building Web Applications with Turbopack"}},{kind:"MdxPage",name:"migrating-from-webpack",route:"/pack/docs/migrating-from-webpack",frontMatter:{title:"Migrate from Webpack to Turbopack",description:"Learn about how to migrate from Webpack to its Rust-powered successor, Turbopack."}},{kind:"MdxPage",name:"roadmap",route:"/pack/docs/roadmap"},{kind:"MdxPage",name:"why-turbopack",route:"/pack/docs/why-turbopack",frontMatter:{title:"Why Turbopack?",description:"Learn why we think Turbopack is the future of bundling for the web."}}]},{kind:"MdxPage",name:"index",route:"/pack",frontMatter:{overrideTitle:"Turbopack - The successor to Webpack",description:"Turbopack is an incremental bundler optimized for JavaScript and TypeScript, written in Rust."}}]},{kind:"MdxPage",name:"privacy",route:"/privacy",frontMatter:{description:"See our privacy policy and how it relates to you.",hidden:!0,headeronly:!0,container:!0,searchable:!1}},{kind:"Folder",name:"repo",route:"/repo",children:[{kind:"Meta",data:{index:{type:"page",display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},docs:{title:"Docs",display:"children"}}},{kind:"Folder",name:"docs",route:"/repo/docs",children:[{kind:"Meta",data:{index:{title:"\u5feb\u901f\u5f00\u59cb"},"getting-started":"\u5165\u95e8","core-concepts":"\u6838\u5fc3\u6982\u5ff5",handbook:"Monorepo \u624b\u518c",ci:"CI Recipes",reference:"API \u53c2\u8003",changelog:{title:"\u4fee\u6539\u8bb0\u5f55",href:"https://github.com/vercel/turbo/releases",newWindow:!0},"upgrading-to-v1":"\u5347\u7ea7\u5230 v1",troubleshooting:"\u6545\u969c\u6392\u9664",acknowledgements:"\u81f4\u8c22",faq:"FAQ"}},{kind:"MdxPage",name:"acknowledgements",route:"/repo/docs/acknowledgements",frontMatter:{title:"Acknowledgements and Prior Art",description:"Thank you to all these developers, build systems, and monorepo tools for their support and assistance."}},{kind:"Folder",name:"ci",route:"/repo/docs/ci",children:[{kind:"Meta",data:{circleci:"CircleCI","github-actions":"GitHub Actions",gitlabci:"GitLab CI",travisci:"Travis CI"}},{kind:"MdxPage",name:"circleci",route:"/repo/docs/ci/circleci",frontMatter:{title:"Using Turborepo with CircleCI",description:"How to use CircleCI with Turborepo to optimize your CI workflow"}},{kind:"MdxPage",name:"github-actions",route:"/repo/docs/ci/github-actions",frontMatter:{title:"Using Turborepo with GitHub Actions",description:"How to use GitHub Actions with Turborepo to optimize your CI workflow"}},{kind:"MdxPage",name:"gitlabci",route:"/repo/docs/ci/gitlabci",frontMatter:{title:"Using Turborepo with GitLab CI",description:"How to use GitLab CI with Turborepo to optimize your CI workflow"}},{kind:"MdxPage",name:"travisci",route:"/repo/docs/ci/travisci",frontMatter:{title:"Using Turborepo with Travis CI",description:"How to use Travis CI with Turborepo to optimize your CI workflow"}}]},{kind:"MdxPage",name:"ci",route:"/repo/docs/ci",frontMatter:{title:"Continuous Integration",description:"Recipes for using Turborepo with GitHub Actions, CircleCI, and other continuous integration providers."}},{kind:"Folder",name:"core-concepts",route:"/repo/docs/core-concepts",children:[{kind:"Meta",data:{caching:"Caching Tasks","remote-caching":"Remote Caching",monorepos:"Monorepos",scopes:{display:"hidden"}}},{kind:"MdxPage",name:"caching",route:"/repo/docs/core-concepts/caching",frontMatter:{title:"Caching",description:"Caching allows Turborepo to skip work that's already been done, for the fastest builds."}},{kind:"Folder",name:"monorepos",route:"/repo/docs/core-concepts/monorepos",children:[{kind:"Meta",data:{"running-tasks":"Running Tasks",filtering:"Filtering Workspaces"}},{kind:"MdxPage",name:"filtering",route:"/repo/docs/core-concepts/monorepos/filtering",frontMatter:{title:"Filtering Workspaces",description:"Only build the workspaces you care about"}},{kind:"MdxPage",name:"running-tasks",route:"/repo/docs/core-concepts/monorepos/running-tasks",frontMatter:{title:"Running Tasks",description:"Turborepo helps you specify task dependencies declaratively."}}]},{kind:"MdxPage",name:"monorepos",route:"/repo/docs/core-concepts/monorepos"},{kind:"MdxPage",name:"remote-caching",route:"/repo/docs/core-concepts/remote-caching",frontMatter:{title:"Remote Caching",description:"Share cache artifacts across machines for even faster builds."}},{kind:"MdxPage",name:"scopes",route:"/repo/docs/core-concepts/scopes",frontMatter:{title:"Scoped tasks",description:"Even faster Turborepo builds with scoped tasks.",searchable:!1}}]},{kind:"MdxPage",name:"faq",route:"/repo/docs/faq",frontMatter:{title:"Frequently Asked Questions",description:"Frequently asked questions about Turborepo."}},{kind:"Folder",name:"getting-started",route:"/repo/docs/getting-started",children:[{kind:"Meta",data:{"add-to-project":"Add to Existing Project","create-new":"Create a New Monorepo","existing-monorepo":"Add to Existing Monorepo"}},{kind:"MdxPage",name:"add-to-project",route:"/repo/docs/getting-started/add-to-project"},{kind:"MdxPage",name:"create-new",route:"/repo/docs/getting-started/create-new",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}},{kind:"MdxPage",name:"existing-monorepo",route:"/repo/docs/getting-started/existing-monorepo",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}}]},{kind:"Folder",name:"handbook",route:"/repo/docs/handbook",children:[{kind:"Meta",data:{"what-is-a-monorepo":"What is a Monorepo?","package-installation":"Package Installation",workspaces:"Workspaces","migrating-to-a-monorepo":"Migrating to a Monorepo",dev:"Development Tasks","building-your-app":"Building Your App","deploying-with-docker":"Deploying with Docker","sharing-code":"Sharing Code",linting:"Linting",testing:"Testing","publishing-packages":"Publishing Packages",troubleshooting:"Troubleshooting"}},{kind:"MdxPage",name:"building-your-app",route:"/repo/docs/handbook/building-your-app"},{kind:"MdxPage",name:"deploying-with-docker",route:"/repo/docs/handbook/deploying-with-docker"},{kind:"MdxPage",name:"dev",route:"/repo/docs/handbook/dev"},{kind:"Folder",name:"linting",route:"/repo/docs/handbook/linting",children:[{kind:"Meta",data:{typescript:"TypeScript",eslint:"ESLint"}},{kind:"MdxPage",name:"eslint",route:"/repo/docs/handbook/linting/eslint"},{kind:"MdxPage",name:"typescript",route:"/repo/docs/handbook/linting/typescript"}]},{kind:"MdxPage",name:"linting",route:"/repo/docs/handbook/linting"},{kind:"MdxPage",name:"migrating-to-a-monorepo",route:"/repo/docs/handbook/migrating-to-a-monorepo"},{kind:"MdxPage",name:"package-installation",route:"/repo/docs/handbook/package-installation"},{kind:"Folder",name:"publishing-packages",route:"/repo/docs/handbook/publishing-packages",children:[{kind:"Meta",data:{bundling:"Bundling","versioning-and-publishing":"Versioning and Publishing"}},{kind:"MdxPage",name:"bundling",route:"/repo/docs/handbook/publishing-packages/bundling"},{kind:"MdxPage",name:"versioning-and-publishing",route:"/repo/docs/handbook/publishing-packages/versioning-and-publishing"}]},{kind:"MdxPage",name:"publishing-packages",route:"/repo/docs/handbook/publishing-packages"},{kind:"Folder",name:"sharing-code",route:"/repo/docs/handbook/sharing-code",children:[{kind:"Meta",data:{"internal-packages":"Internal Packages"}},{kind:"MdxPage",name:"internal-packages",route:"/repo/docs/handbook/sharing-code/internal-packages"}]},{kind:"MdxPage",name:"sharing-code",route:"/repo/docs/handbook/sharing-code"},{kind:"MdxPage",name:"testing",route:"/repo/docs/handbook/testing"},{kind:"MdxPage",name:"troubleshooting",route:"/repo/docs/handbook/troubleshooting"},{kind:"MdxPage",name:"what-is-a-monorepo",route:"/repo/docs/handbook/what-is-a-monorepo"},{kind:"MdxPage",name:"workspaces",route:"/repo/docs/handbook/workspaces"}]},{kind:"MdxPage",name:"handbook",route:"/repo/docs/handbook",frontMatter:{title:"Monorepo Handbook",description:"The missing manual on how to set up and use your monorepo."}},{kind:"MdxPage",name:"index",route:"/repo/docs",frontMatter:{title:"Turborepo \u5feb\u901f\u5f00\u59cb",description:"\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a monorepo \u6216\u5c06 Turborepo \u6dfb\u52a0\u5230\u73b0\u6709\u9879\u76ee."}},{kind:"Folder",name:"reference",route:"/repo/docs/reference",children:[{kind:"Meta",data:{configuration:"Configuration Options","command-line-reference":"CLI Usage",codemods:"Codemods"}},{kind:"MdxPage",name:"codemods",route:"/repo/docs/reference/codemods",frontMatter:{title:"Turborepo Codemods",description:"To make upgrading easier, Turborepo includes codemods and migration scripts."}},{kind:"MdxPage",name:"command-line-reference",route:"/repo/docs/reference/command-line-reference",frontMatter:{title:"CLI Reference",description:"Turborepo is a high-performance build system for JavaScript and TypeScript codebases."}},{kind:"MdxPage",name:"configuration",route:"/repo/docs/reference/configuration",frontMatter:{title:"Configuration Options - turbo.json",description:"Learn how to configure Turborepo through `turbo.json`."}}]},{kind:"MdxPage",name:"troubleshooting",route:"/repo/docs/troubleshooting",frontMatter:{title:"Troubleshooting",description:"This guide aims to help you debug issues with your Turborepo builds and configuration."}},{kind:"MdxPage",name:"upgrading-to-v1",route:"/repo/docs/upgrading-to-v1",frontMatter:{title:"Upgrading to v1",description:"Learn how to upgrade to Turborepo v1, now open-source and part of Vercel."}}]},{kind:"MdxPage",name:"index",route:"/repo",frontMatter:{description:"Turborepo is a high-performance build system for JavaScript and TypeScript codebases."}}]},{kind:"MdxPage",name:"showcase",route:"/showcase",frontMatter:{headeronly:!0,searchable:!1,description:"Turborepo by Vercel is the one of the fastest growing build systems in the frontend ecosystem. It's trusted by thousands of developers in production including teams at Vercel, AWS, Netflix, Microsoft, Disney, and more."}},{kind:"MdxPage",name:"terms",route:"/terms",frontMatter:{description:"See our terms of our service and how they relate to you.",hidden:!0,headeronly:!0,container:!0,searchable:!1}}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"Running Tasks in a Monorepo",position:{start:{line:5,column:3,offset:119},end:{line:5,column:30,offset:146}}}],position:{start:{line:5,column:1,offset:117},end:{line:5,column:30,offset:146}},value:"Running Tasks in a Monorepo"},{type:"heading",depth:2,children:[{type:"text",value:"Most tools don't optimize for speed",position:{start:{line:13,column:4,offset:556},end:{line:13,column:39,offset:591}}}],position:{start:{line:13,column:1,offset:553},end:{line:13,column:39,offset:591}},value:"Most tools don't optimize for speed"},{type:"heading",depth:2,children:[{type:"text",value:"Turborepo can multitask",position:{start:{line:31,column:4,offset:1248},end:{line:31,column:27,offset:1271}}}],position:{start:{line:31,column:1,offset:1245},end:{line:31,column:27,offset:1271}},value:"Turborepo can multitask"},{type:"heading",depth:2,children:[{type:"text",value:"Defining a pipeline",position:{start:{line:73,column:4,offset:2328},end:{line:73,column:23,offset:2347}}}],position:{start:{line:73,column:1,offset:2325},end:{line:73,column:23,offset:2347}},value:"Defining a pipeline"},{type:"heading",depth:3,children:[{type:"text",value:"Dependencies between tasks",position:{start:{line:115,column:5,offset:3692},end:{line:115,column:31,offset:3718}}}],position:{start:{line:115,column:1,offset:3688},end:{line:115,column:31,offset:3718}},value:"Dependencies between tasks"},{type:"heading",depth:4,children:[{type:"text",value:"In the same workspace",position:{start:{line:117,column:6,offset:3725},end:{line:117,column:27,offset:3746}}}],position:{start:{line:117,column:1,offset:3720},end:{line:117,column:27,offset:3746}},value:"In the same workspace"},{type:"heading",depth:4,children:[{type:"text",value:"In a different workspace",position:{start:{line:140,column:6,offset:4378},end:{line:140,column:30,offset:4402}}}],position:{start:{line:140,column:1,offset:4373},end:{line:140,column:30,offset:4402}},value:"In a different workspace"},{type:"heading",depth:4,children:[{type:"text",value:"No dependencies",position:{start:{line:159,column:6,offset:4984},end:{line:159,column:21,offset:4999}}}],position:{start:{line:159,column:1,offset:4979},end:{line:159,column:21,offset:4999}},value:"No dependencies"},{type:"heading",depth:4,children:[{type:"text",value:"Specific workspace-tasks",position:{start:{line:176,column:6,offset:5379},end:{line:176,column:30,offset:5403}}}],position:{start:{line:176,column:1,offset:5374},end:{line:176,column:30,offset:5403}},value:"Specific workspace-tasks"},{type:"heading",depth:3,children:[{type:"text",value:"Running tasks from the root",position:{start:{line:221,column:5,offset:7558},end:{line:221,column:32,offset:7585}}}],position:{start:{line:221,column:1,offset:7554},end:{line:221,column:32,offset:7585}},value:"Running tasks from the root"},{type:"heading",depth:3,children:[{type:"text",value:"Tips",position:{start:{line:280,column:5,offset:10089},end:{line:280,column:9,offset:10093}}}],position:{start:{line:280,column:1,offset:10085},end:{line:280,column:9,offset:10093}},value:"Tips"},{type:"heading",depth:4,children:[{type:"text",value:"Tasks that are in the ",position:{start:{line:282,column:6,offset:10100},end:{line:282,column:28,offset:10122}}},{type:"inlineCode",value:"pipeline",position:{start:{line:282,column:28,offset:10122},end:{line:282,column:38,offset:10132}}},{type:"text",value:" but not in SOME ",position:{start:{line:282,column:38,offset:10132},end:{line:282,column:55,offset:10149}}},{type:"inlineCode",value:"package.json",position:{start:{line:282,column:55,offset:10149},end:{line:282,column:69,offset:10163}}}],position:{start:{line:282,column:1,offset:10095},end:{line:282,column:69,offset:10163}},value:"Tasks that are in the pipeline but not in SOME package.json"},{type:"heading",depth:4,children:[{type:"inlineCode",value:"pipeline",position:{start:{line:286,column:6,offset:10321},end:{line:286,column:16,offset:10331}}},{type:"text",value:" tasks are the only ones that ",position:{start:{line:286,column:16,offset:10331},end:{line:286,column:46,offset:10361}}},{type:"inlineCode",value:"turbo",position:{start:{line:286,column:46,offset:10361},end:{line:286,column:53,offset:10368}}},{type:"text",value:" knows about",position:{start:{line:286,column:53,offset:10368},end:{line:286,column:65,offset:10380}}}],position:{start:{line:286,column:1,offset:10316},end:{line:286,column:65,offset:10380}},value:"pipeline tasks are the only ones that turbo knows about"}],unstable_flexsearch:!0};globalThis.__nextra_internal__={pageMap:g.pageMap,route:g.route};function v(e){var s=Object.assign({h1:"h1",p:"p",strong:"strong",code:"code",em:"em",h2:"h2",div:"div",pre:"pre",span:"span",h3:"h3",h4:"h4",ol:"ol",li:"li",a:"a"},(0,c.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{children:"Running Tasks in a Monorepo"}),"\n",(0,i.jsxs)(s.p,{children:["Every monorepo has two main building blocks: ",(0,i.jsx)(s.strong,{children:"workspaces"})," and ",(0,i.jsx)(s.strong,{children:"tasks"}),". Let's imagine you have a monorepo containing ",(0,i.jsx)(s.strong,{children:"three workspaces"}),", each with ",(0,i.jsx)(s.strong,{children:"three tasks"}),":"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(h(),{placeholder:"blur",src:p})}),"\n",(0,i.jsxs)(s.p,{children:["Here, both ",(0,i.jsx)(s.code,{children:"apps/web"})," and ",(0,i.jsx)(s.code,{children:"apps/doc"})," use code from ",(0,i.jsx)(s.code,{children:"packages/shared"}),". In fact, when they're built (via ",(0,i.jsx)(s.code,{children:"build"}),") ",(0,i.jsxs)(s.strong,{children:["they need ",(0,i.jsx)(s.code,{children:"packages/shared"})," to be built ",(0,i.jsx)(s.em,{children:"first"})]}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"most-tools-dont-optimize-for-speed",children:"Most tools don't optimize for speed"}),"\n",(0,i.jsxs)(s.p,{children:["Let's imagine we want to run all our tasks across all our workspaces. In a tool like ",(0,i.jsx)(s.code,{children:"yarn"}),", you might run a script like this:"]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"yarn workspaces run lint"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"yarn workspaces run test"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"yarn workspaces run build"})})]})})}),"\n",(0,i.jsx)(s.p,{children:"This would mean the tasks run like this:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(h(),{placeholder:"blur",src:x})}),"\n",(0,i.jsxs)(s.p,{children:["As you can see, ",(0,i.jsx)(s.code,{children:"lint"})," gets run in all the workspaces. Then, ",(0,i.jsx)(s.code,{children:"build"})," gets run - with ",(0,i.jsx)(s.code,{children:"shared"})," going first. Finally, ",(0,i.jsx)(s.code,{children:"test"})," gets run."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"This is the slowest possible way to run these tasks"}),". Each task needs to wait for the previous one to finish before it can start. To improve on this, we'll need a tool that can multitask."]}),"\n",(0,i.jsx)(s.h2,{id:"turborepo-can-multitask",children:"Turborepo can multitask"}),"\n",(0,i.jsx)(s.p,{children:"Turborepo can schedule our tasks for maximum speed by understanding the dependencies between our tasks."}),"\n",(0,i.jsxs)(s.p,{children:["First, we declare our tasks inside ",(0,i.jsx)(s.code,{children:"turbo.json"}),":"]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"json","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"$schema"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://turborepo.org/schema.json"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"pipeline"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ^build means build must be run in dependencies"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// before it can be run in this workspace"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"^build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"test"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"lint"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:["Next, we can replace our ",(0,i.jsx)(s.code,{children:"yarn workspaces"})," script with this:"]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"diff","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#EF6270"},children:"- yarn workspaces run lint"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#EF6270"},children:"- yarn workspaces run test"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#EF6270"},children:"- yarn workspaces run build"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+ turbo run lint test build"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:["When we run it, Turborepo will ",(0,i.jsx)(s.strong,{children:"multitask as many tasks as possible over all available CPU's"}),", meaning our tasks run like this:"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(h(),{placeholder:"blur",src:u})}),"\n",(0,i.jsxs)(s.p,{children:["Both ",(0,i.jsx)(s.code,{children:"lint"})," and ",(0,i.jsx)(s.code,{children:"test"})," run immediately, because they have no ",(0,i.jsx)(s.code,{children:"dependsOn"})," specified in ",(0,i.jsx)(s.code,{children:"turbo.json"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"build"})," task inside ",(0,i.jsx)(s.code,{children:"shared"})," completes first, then ",(0,i.jsx)(s.code,{children:"web"})," and ",(0,i.jsx)(s.code,{children:"docs"})," build afterwards."]}),"\n",(0,i.jsx)(s.h2,{id:"defining-a-pipeline",children:"Defining a pipeline"}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"pipeline"})," configuration declares which tasks depend on each other in your monorepo. Here's a kitchen sink example:"]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"diff","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "$schema": "https://turborepo.org/schema.json",'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "pipeline": {'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "build": {'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // A workspace's `build` task depends on that workspace's"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // topological dependencies' and devDependencies'"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // `build` tasks  being completed first. The `^` symbol"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // indicates an upstream dependency."})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'      "dependsOn": ["^build"]'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    },"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "test": {'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // A workspace's `test` task depends on that workspace's"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // own `build` task being completed first."})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'      "dependsOn": ["build"],'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'      "outputs": [],'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // A workspace's `test` task should only be rerun when"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // either a `.tsx` or `.ts` file has changed."})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'      "inputs": ["src/**/*.tsx", "src/**/*.ts", "test/**/*.ts", "test/**/*.tsx"]'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    },"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "lint": {'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // A workspace's `lint` task has no dependencies and"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // can be run whenever."})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'      "outputs": []'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    },"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "deploy": {'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // A workspace's `deploy` task depends on the `build`,"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // `test`, and `lint` tasks of the same workspace"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"#4BB74A"},children:"+      // being completed."})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'      "dependsOn": ["build", "test", "lint"],'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'      "outputs": []'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:["Let's walk through some common patterns you'll want to get to know before diving in to ",(0,i.jsx)(s.code,{children:"turbo.json"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"dependencies-between-tasks",children:"Dependencies between tasks"}),"\n",(0,i.jsx)(s.h4,{id:"in-the-same-workspace",children:"In the same workspace"}),"\n",(0,i.jsxs)(s.p,{children:["There might be tasks which need to run ",(0,i.jsx)(s.em,{children:"before"})," other tasks. For instance, ",(0,i.jsx)(s.code,{children:"build"})," might need to be run before ",(0,i.jsx)(s.code,{children:"deploy"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"If both tasks are in the same workspace, you can specify the relationship like this:"}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{filename:"turbo.json",children:(0,i.jsxs)(s.code,{"data-language":"json","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"$schema"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://turborepo.org/schema.json"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"pipeline"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {}"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"deploy"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// A workspace's `deploy` task depends on the `build`,"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// task of the same workspace being completed."})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:["This means that whenever ",(0,i.jsx)(s.code,{children:"turbo run deploy"})," is run, ",(0,i.jsx)(s.code,{children:"build"})," will also be run inside the same workspace."]}),"\n",(0,i.jsx)(s.h4,{id:"in-a-different-workspace",children:"In a different workspace"}),"\n",(0,i.jsxs)(s.p,{children:["A common pattern in monorepos is to declare that a workspace's ",(0,i.jsx)(s.code,{children:"build"})," task should only run once the ",(0,i.jsx)(s.code,{children:"build"})," tasks of all ",(0,i.jsx)(s.em,{children:"the workspaces it depends on"})," are complete."]}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"^"})," symbol explicitly declares that the task has a dependency on a task in a workspace it depends on."]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{filename:"turbo.json",children:(0,i.jsxs)(s.code,{"data-language":"jsonc","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"$schema"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://turborepo.org/schema.json"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"pipeline"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// \"A workspace's `build` command depends on its dependencies'"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// and devDependencies' `build` commands being completed first\""})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"^build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsx)(s.h4,{id:"no-dependencies",children:"No dependencies"}),"\n",(0,i.jsxs)(s.p,{children:["An empty dependency list (",(0,i.jsx)(s.code,{children:"dependsOn"})," is either undefined or ",(0,i.jsx)(s.code,{children:"[]"}),") means that nothing needs to run before this task! After all, it has NO dependencies."]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"jsonc","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"$schema"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://turborepo.org/schema.json"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"pipeline"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"lint"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// A workspace's `lint` command has no dependencies and can be run"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// whenever."})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsx)(s.h4,{id:"specific-workspace-tasks",children:"Specific workspace-tasks"}),"\n",(0,i.jsxs)(s.p,{children:["Sometimes, you may want to create a workspace-task dependency on another workspace-task. This can be especially helpful for repos migrating from ",(0,i.jsx)(s.code,{children:"lerna"})," or ",(0,i.jsx)(s.code,{children:"rush"}),", where tasks are run in separate phases by default. Sometimes these configurations make assumptions that cannot be expressed in a simple ",(0,i.jsx)(s.code,{children:"pipeline"})," configuration, as seen above. Or you may just want to express sequences of tasks between applications or microservices when using ",(0,i.jsx)(s.code,{children:"turbo"})," in CI/CD."]}),"\n",(0,i.jsxs)(s.p,{children:["For these cases, you can express these relationships in your ",(0,i.jsx)(s.code,{children:"pipeline"})," configuration using the ",(0,i.jsx)(s.code,{children:"<workspace>#<task>"})," syntax.\nThe example below describes the ",(0,i.jsx)(s.code,{children:"deploy"})," script of a ",(0,i.jsx)(s.code,{children:"frontend"})," application that depends on the ",(0,i.jsx)(s.code,{children:"deploy"})," and ",(0,i.jsx)(s.code,{children:"health-check"})," scripts of ",(0,i.jsx)(s.code,{children:"backend"}),", as well as the ",(0,i.jsx)(s.code,{children:"test"})," script of a ",(0,i.jsx)(s.code,{children:"ui"})," workspace:"]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"jsonc","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"$schema"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://turborepo.org/schema.json"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"pipeline"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Standard configuration"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"^build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"test"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"^build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"deploy"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"test"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:" "}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Explicit workspace-task to workspace-task dependency"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"frontend#deploy"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"ui#test"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"backend#deploy"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"backend#health-check"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:["This explicit configuration for ",(0,i.jsx)(s.code,{children:"frontend#deploy"})," may seem to conflict with the ",(0,i.jsx)(s.code,{children:"test"})," and ",(0,i.jsx)(s.code,{children:"deploy"})," task configurations, but it does not. Since ",(0,i.jsx)(s.code,{children:"test"})," and ",(0,i.jsx)(s.code,{children:"deploy"})," do not have dependencies on other workspaces (e.g. ",(0,i.jsx)(s.code,{children:"^<task>"}),"), they can execute any time after their workspace's ",(0,i.jsx)(s.code,{children:"build"})," and ",(0,i.jsx)(s.code,{children:"test"})," scripts have finished."]}),"\n",(0,i.jsxs)(k.Z,{children:[(0,i.jsx)(s.p,{children:"Notes:"}),(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Although this ",(0,i.jsx)(s.code,{children:"<workspace>#<task>"})," syntax is a useful escape hatch, we generally recommend using it for deployment orchestration tasks such as health checks, rather than build-time dependencies, so that Turborepo can optimize these tasks more efficiently"]}),"\n",(0,i.jsxs)(s.li,{children:["Package-tasks do not inherit cache configuration. You must redeclare\n",(0,i.jsx)(s.a,{href:"../../reference/configuration#outputs",children:(0,i.jsx)(s.code,{children:"outputs"})})," at the moment."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"<workspace>"})," must match the ",(0,i.jsx)(s.code,{children:"name"})," key in the workspace's ",(0,i.jsx)(s.code,{children:"package.json"})," or the task will be ignored."]}),"\n"]})]}),"\n",(0,i.jsx)(s.h3,{id:"running-tasks-from-the-root",children:"Running tasks from the root"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"turbo"})," can run tasks that exist in the ",(0,i.jsx)(s.code,{children:"package.json"})," file at the root of the monorepo.\nThese must be explicitly added to the pipeline configuration using the key syntax ",(0,i.jsx)(s.code,{children:'"//#<task>"'}),". This is\ntrue even for tasks that already have their own entry. For example, if your pipeline declares a ",(0,i.jsx)(s.code,{children:'"build"'})," task,\nand you want to include the ",(0,i.jsx)(s.code,{children:"build"})," script defined in the monorepo's root ",(0,i.jsx)(s.code,{children:"package.json"})," file with\n",(0,i.jsx)(s.code,{children:"turbo run build"}),", you must opt the root into it by declaring ",(0,i.jsx)(s.code,{children:'"//#build": {...}'})," in your configuration.\nConversely, you ",(0,i.jsx)(s.em,{children:"do not"})," need to define a generic ",(0,i.jsx)(s.code,{children:'"my-task": {...}'})," entry if all you need is ",(0,i.jsx)(s.code,{children:'"//#my-task": {...}'}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["A sample pipeline that defines the root task ",(0,i.jsx)(s.code,{children:"format"})," and opts the root into ",(0,i.jsx)(s.code,{children:"test"})," might look like:"]}),"\n",(0,i.jsx)(s.div,{"data-rehype-pretty-code-fragment":"",children:(0,i.jsx)(s.pre,{children:(0,i.jsxs)(s.code,{"data-language":"jsonc","data-theme":"default",children:[(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"$schema"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://turborepo.org/schema.json"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"pipeline"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"^build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"test"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"^build"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:'// This will cause the "test" script to be included when'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:'// "turbo run test" is run'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"//#test"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:'// This will cause the "format" script in the root package.json'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:'// to be run when "turbo run format" is run. Since the general'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:'// "format" task is not defined, only the root\'s "format" script'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// will be run."})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"//#format"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"dependsOn"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"outputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"dist/**/*"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"inputs"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"version.txt"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"A note on recursion"}),": Scripts defined in the monorepo's root ",(0,i.jsx)(s.code,{children:"package.json"})," often call ",(0,i.jsx)(s.code,{children:"turbo"})," themselves.\nFor example, the ",(0,i.jsx)(s.code,{children:"build"})," script might be ",(0,i.jsx)(s.code,{children:"turbo run build"}),". In this situation, including ",(0,i.jsx)(s.code,{children:"//#build"})," in\n",(0,i.jsx)(s.code,{children:"turbo run build"})," will cause infinite recursion. It is for this reason that tasks run from the monorepo's root must\nbe explicitly opted into via including ",(0,i.jsx)(s.code,{children:"//#<task>"})," in the pipeline configuration. ",(0,i.jsx)(s.code,{children:"turbo"})," includes\nsome best-effort checking to produce an error in the recursion situations, but it is up to you to to only\nopt in those tasks which don't themselves trigger a ",(0,i.jsx)(s.code,{children:"turbo"})," run that would recurse."]}),"\n",(0,i.jsx)(k.Z,{type:"idea",icon:(0,i.jsx)(m(),{className:"h-5 w-5 mt-1 text-gray-400","aria-hidden":"true"}),children:(0,i.jsxs)(s.p,{children:["Turborepo's Pipeline API design and this page of documentation was inspired by\n",(0,i.jsx)(s.a,{href:"https://microsoft.github.io/lage/docs/Tutorial/pipeline#defining-a-pipeline",children:"Microsoft's Lage\nproject"}),".\nShoutout to ",(0,i.jsx)(s.a,{href:"https://twitter.com/kenneth_chau",children:"Kenneth Chau"})," for the idea of\nfanning out tasks in such a concise and elegant way."]})}),"\n",(0,i.jsx)(s.h3,{id:"tips",children:"Tips"}),"\n",(0,i.jsxs)(s.h4,{id:"tasks-that-are-in-the-pipeline-but-not-in-some-packagejson",children:["Tasks that are in the ",(0,i.jsx)(s.code,{children:"pipeline"})," but not in SOME ",(0,i.jsx)(s.code,{children:"package.json"})]}),"\n",(0,i.jsxs)(s.p,{children:["Sometimes tasks declared in the ",(0,i.jsx)(s.code,{children:"pipeline"})," are not present in all workspaces' ",(0,i.jsx)(s.code,{children:"package.json"})," files. ",(0,i.jsx)(s.code,{children:"turbo"})," will gracefully ignore those. No problem!"]}),"\n",(0,i.jsxs)(s.h4,{id:"pipeline-tasks-are-the-only-ones-that-turbo-knows-about",children:[(0,i.jsx)(s.code,{children:"pipeline"})," tasks are the only ones that ",(0,i.jsx)(s.code,{children:"turbo"})," knows about"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"turbo"})," will only account for tasks declared in the ",(0,i.jsx)(s.code,{children:"pipeline"})," configuration. If it's not listed there, ",(0,i.jsx)(s.code,{children:"turbo"})," will not know how to run them."]})]})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=Object.assign({},(0,c.ah)(),e.components),n=s.wrapper;return n?(0,i.jsx)(n,(0,t.Z)((0,r.Z)({},e),{children:(0,i.jsx)(v,(0,r.Z)({},e))})):v(e)}g.title="Running Tasks";(o=globalThis).__nextra_pageContext__||(o.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/repo/docs/core-concepts/monorepos/running-tasks"]={Content:function(e){return(0,i.jsx)(a.mK.Provider,{value:e,children:(0,i.jsx)(b,{})})},pageOpts:g,themeConfig:l.Z}}},function(e){e.O(0,[8002,8583,9774,2888,179],(function(){return s=3318,e(e.s=s);var s}));var s=e.O();_N_E=s}]);