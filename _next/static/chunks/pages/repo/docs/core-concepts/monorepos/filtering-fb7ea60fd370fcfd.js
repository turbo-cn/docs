(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7502],{4947:function(e,n,t){const o=t(7294);const r=o.forwardRef((function(e,n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n},e),o.createElement("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"}))}));e.exports=r},9317:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/repo/docs/core-concepts/monorepos/filtering",function(){return t(6404)}])},5449:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var o=t(5893),r=t(7294);var i=r.forwardRef((function(e,n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n},e),r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"}))}));var a=r.forwardRef((function(e,n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n},e),r.createElement("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"}))}));var s=r.forwardRef((function(e,n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n},e),r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))}));var c=r.forwardRef((function(e,n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n},e),r.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))})),d={info:{classes:"bg-blue-100 text-blue-800 dark:text-blue-300 dark:bg-blue-200 dark:bg-opacity-10",icon:(0,o.jsx)(i,{className:"w-5 h-5 mt-1"})},idea:{classes:"bg-gray-100 text-gray-800 dark:text-gray-300 dark:bg-gray-200 dark:bg-opacity-10",icon:(0,o.jsx)(a,{className:"w-5 h-5 mt-1"})},error:{classes:"bg-red-200 text-red-900 dark:text-red-200 dark:bg-red-600 dark:bg-opacity-30",icon:(0,o.jsx)(s,{className:"w-5 h-5 mt-1"})},default:{classes:"bg-orange-100 text-orange-800 dark:text-orange-300 dark:bg-orange-200 dark:bg-opacity-10",icon:(0,o.jsx)(c,{className:"w-5 h-5 mt-1"})}};function l(e){var n=e.children,t=e.type,r=void 0===t?"default":t,i=e.icon;return(0,o.jsxs)("div",{className:"".concat(d[r].classes," flex rounded-lg callout mt-6"),children:[(0,o.jsx)("div",{className:"py-2 pl-3 pr-2 text-xl select-none",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},children:i||d[r].icon}),(0,o.jsx)("div",{className:"py-2 pr-4 overflow-auto",children:n})]})}},6404:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x.ZP}});var o,r=t(6042),i=t(9396),a=t(5893),s=t(6871),c=t(8583),d=(t(8658),t(1151)),l=t(1608),p=t.n(l),h={src:"/_next/static/media/no-filter.54c37943.png",height:1128,width:1896,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAfklEQVR42gUAwQqCMHTnUvQ905ZptbRtNp5bIjTLwkOHCKRz//8jwRARMEIAUWkoVZjwGOMYgC2WYZSfznqYxrGrjE+lDFYpJIyoGx6f3n6f13l20+94ezufJ5w1mlpzof3dkO9r9xKeNGWwZgUXatOWuGsOVgRVvZWqsFnI//VaETTH938mAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},u={src:"/_next/static/media/with-filter.d1f5c746.png",height:1128,width:1896,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAc0lEQVR42gUA7Q6CIBB3fKiwGmQ/ovd/rNYDOLZMHYLcneu890jVSOvCoxL8lyTaBp0Ea525xSnE+Bz1dr5QGsEHkzT93blpUIELvZ1SR+5ArjlJxnNPXzVitpRL6Rk++BNMoDUQYq7LIMw677NIrVVkvAAtqzyCzljtuwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5},m=t(5449),g=t(4947),f=t.n(g),x=t(5764),k={filePath:"pages/repo/docs/core-concepts/monorepos/filtering.mdx",route:"/repo/docs/core-concepts/monorepos/filtering",frontMatter:{title:"Filtering Workspaces",description:"Only build the workspaces you care about"},pageMap:[{kind:"Meta",data:{"*":{type:"page"},index:{display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},repo:"Repo",pack:"Pack",blog:{title:"\u535a\u5ba2",theme:{typesetting:"article"}},showcase:"\u6848\u4f8b","official-website":{title:"\u5b98\u7f51",href:"https://turbo.build/",newWindow:!0},confirm:{title:"Confirm",display:"hidden"},terms:{title:"\u670d\u52a1\u6761\u6b3e",display:"hidden"},privacy:{title:"\u9690\u79c1\u653f\u7b56",display:"hidden"}}},{kind:"Folder",name:"blog",route:"/blog",children:[{kind:"Meta",data:{"*":{"//":"Hide all the links from the sidebar or navbar, and disable ToC and Sidebar for these pages.",display:"hidden",theme:{toc:!1,sidebar:!1,typesetting:"article"}},"turbo-1-6-0":"Turborepo 1.6","turbo-1-5-0":"Turborepo 1.5","turbo-1-4-0":"Turborepo 1.4","turbo-1-3-0":"Turborepo 1.3","turbo-1-2-0":"Turborepo 1.2","turbo-1-1-0":"Turborepo 1.1","joining-vercel":"Joining Vercel","saml-sso-now-available":"SAML SSO now available","you-might-not-need-typescript-project-references":"You might not need TypeScript project references","turbo-0-4-0":"Turborepo 0.4.0"}},{kind:"MdxPage",name:"joining-vercel",route:"/blog/joining-vercel",frontMatter:{title:"Turborepo is joining Vercel",date:"2021/12/09",description:"Turborepo is joining Vercel to make the web even faster.",tag:"web development",ogImage:"/og-image.png"}},{kind:"MdxPage",name:"saml-sso-now-available",route:"/blog/saml-sso-now-available",frontMatter:{title:"SAML SSO is now available",date:"2021/08/03",description:"SAML Single Sign-on (SSO) is now available to Enterprise customers thanks to our friends over at WorkOS.",tag:"web development",ogImage:"/images/blog/og-saml.png"}},{kind:"MdxPage",name:"turbo-0-4-0",route:"/blog/turbo-0-4-0",frontMatter:{title:"Turborepo 0.4.0",date:"2021/04/02",description:"Turborepo 0.4.0 introduces 10x faster hashing, pruned workspaces with sparse installs, a new pipeline configuration API, and improved cache control.",tag:"web development",ogImage:"/og-image.png"}},{kind:"MdxPage",name:"turbo-1-1-0",route:"/blog/turbo-1-1-0",frontMatter:{title:"Turborepo 1.1",date:"2022/01/31",description:"Turborepo 1.1 introduces automatic migrations, turbo.json configuration, environment variable dependencies, partial Yarn v2 support, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-1-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-2-0",route:"/blog/turbo-1-2-0",frontMatter:{title:"Turborepo 1.2",date:"2022/04/08",description:"Turborepo 1.2 introduces improved task filtering, artifact signing and integrity, human-readable and JSON dry runs, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-2-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-3-0",route:"/blog/turbo-1-3-0",frontMatter:{title:"Turborepo 1.3",date:"2022/06/23",description:"Turborepo 1.3 introduces restricted hash inputs, root script running and caching, new CI/CD Recipes, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-3-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-4-0",route:"/blog/turbo-1-4-0",frontMatter:{title:"Turborepo 1.4",date:"2022/08/09",description:"Turborepo 1.4 has new examples, automatically includes environment variables, and more!",tag:"web development",ogImage:"/images/blog/turbo-1-4-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-5-0",route:"/blog/turbo-1-5-0",frontMatter:{title:"Turborepo 1.5",date:"2022/09/19",description:"Turborepo 1.5 brings the Monorepo Handbook, drops the 'run' command, improves pruning, and much more!",tag:"web development",ogImage:"/images/blog/turbo-1-5-0/twitter-card.png"}},{kind:"MdxPage",name:"turbo-1-6-0",route:"/blog/turbo-1-6-0",frontMatter:{title:"Turborepo 1.6",date:"2022/10/21",description:"Turborepo 1.6 lets you use Turborepo in non-monorepos, prune for npm, and improves cache performance.",tag:"web development",ogImage:"/images/blog/turbo-1-6-0/twitter-card.png"}},{kind:"MdxPage",name:"you-might-not-need-typescript-project-references",route:"/blog/you-might-not-need-typescript-project-references",frontMatter:{title:"You might not need TypeScript project references",date:"2021/04/23",description:'As it turns out, you might not even references or even an interim TypeScript build step with a pattern I am about to show you, which I dub "internal packages."',tag:"web development",ogImage:"/images/blog/og-project-references.png"}}]},{kind:"MdxPage",name:"blog",route:"/blog",frontMatter:{description:"The latest updates and releases from the Turbo team at Vercel.",type:"posts"}},{kind:"MdxPage",name:"confirm",route:"/confirm",frontMatter:{headeronly:!0,searchable:!1}},{kind:"MdxPage",name:"index",route:"/",frontMatter:{description:"Turbo is an incremental bundler and build system optimized for JavaScript and TypeScript, written in Rust."}},{kind:"Folder",name:"pack",route:"/pack",children:[{kind:"Meta",data:{index:{type:"page",display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},docs:{title:"\u6587\u6863",display:"children"}}},{kind:"Folder",name:"docs",route:"/pack/docs",children:[{kind:"Meta",data:{index:"Quickstart","why-turbopack":"Why Turbopack?","core-concepts":"Core Concepts",roadmap:"Roadmap",features:"Features",comparisons:"Comparisons",benchmarks:"Benchmarks","migrating-from-webpack":"Migrating from Webpack"}},{kind:"MdxPage",name:"benchmarks",route:"/pack/docs/benchmarks"},{kind:"Folder",name:"comparisons",route:"/pack/docs/comparisons",children:[{kind:"Meta",data:{"turbopack-vs-vite":"Turbopack vs. Vite","turbopack-vs-webpack":"Turbopack vs. Webpack"}},{kind:"MdxPage",name:"turbopack-vs-vite",route:"/pack/docs/comparisons/turbopack-vs-vite"},{kind:"MdxPage",name:"turbopack-vs-webpack",route:"/pack/docs/comparisons/turbopack-vs-webpack"}]},{kind:"MdxPage",name:"core-concepts",route:"/pack/docs/core-concepts",frontMatter:{title:"Core Concepts",description:"Learn about the innovative architecture that powers Turbopack's speed improvements."}},{kind:"Folder",name:"features",route:"/pack/docs/features",children:[{kind:"Meta",data:{javascript:"JavaScript",typescript:"TypeScript",frameworks:"Frameworks",css:"CSS","dev-server":"Dev Server","static-assets":"Static Assets",imports:"Imports","environment-variables":"Environment Variables"}},{kind:"MdxPage",name:"css",route:"/pack/docs/features/css"},{kind:"MdxPage",name:"dev-server",route:"/pack/docs/features/dev-server"},{kind:"MdxPage",name:"environment-variables",route:"/pack/docs/features/environment-variables"},{kind:"MdxPage",name:"frameworks",route:"/pack/docs/features/frameworks"},{kind:"MdxPage",name:"imports",route:"/pack/docs/features/imports"},{kind:"MdxPage",name:"javascript",route:"/pack/docs/features/javascript"},{kind:"MdxPage",name:"static-assets",route:"/pack/docs/features/static-assets"},{kind:"MdxPage",name:"typescript",route:"/pack/docs/features/typescript"}]},{kind:"MdxPage",name:"features",route:"/pack/docs/features",frontMatter:{title:"Features",description:"Learn about Turbopack's supported features"}},{kind:"MdxPage",name:"index",route:"/pack/docs",frontMatter:{title:"Turbopack Quickstart",description:"Start Building Web Applications with Turbopack"}},{kind:"MdxPage",name:"migrating-from-webpack",route:"/pack/docs/migrating-from-webpack",frontMatter:{title:"Migrate from Webpack to Turbopack",description:"Learn about how to migrate from Webpack to its Rust-powered successor, Turbopack."}},{kind:"MdxPage",name:"roadmap",route:"/pack/docs/roadmap"},{kind:"MdxPage",name:"why-turbopack",route:"/pack/docs/why-turbopack",frontMatter:{title:"Why Turbopack?",description:"Learn why we think Turbopack is the future of bundling for the web."}}]},{kind:"MdxPage",name:"index",route:"/pack",frontMatter:{overrideTitle:"Turbopack - The successor to Webpack",description:"Turbopack is an incremental bundler optimized for JavaScript and TypeScript, written in Rust."}}]},{kind:"MdxPage",name:"privacy",route:"/privacy",frontMatter:{description:"See our privacy policy and how it relates to you.",hidden:!0,headeronly:!0,container:!0,searchable:!1}},{kind:"Folder",name:"repo",route:"/repo",children:[{kind:"Meta",data:{index:{type:"page",display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},docs:{title:"Docs",display:"children"}}},{kind:"Folder",name:"docs",route:"/repo/docs",children:[{kind:"Meta",data:{index:{title:"\u5feb\u901f\u5f00\u59cb"},"getting-started":"\u5165\u95e8","core-concepts":"\u6838\u5fc3\u6982\u5ff5",handbook:"Monorepo \u624b\u518c",ci:"CI Recipes",reference:"API \u53c2\u8003",changelog:{title:"\u4fee\u6539\u8bb0\u5f55",href:"https://github.com/vercel/turbo/releases",newWindow:!0},"upgrading-to-v1":"\u5347\u7ea7\u5230 v1",troubleshooting:"\u6545\u969c\u6392\u9664",acknowledgements:"\u81f4\u8c22",faq:"FAQ"}},{kind:"MdxPage",name:"acknowledgements",route:"/repo/docs/acknowledgements",frontMatter:{title:"Acknowledgements and Prior Art",description:"Thank you to all these developers, build systems, and monorepo tools for their support and assistance."}},{kind:"Folder",name:"ci",route:"/repo/docs/ci",children:[{kind:"Meta",data:{circleci:"CircleCI","github-actions":"GitHub Actions",gitlabci:"GitLab CI",travisci:"Travis CI"}},{kind:"MdxPage",name:"circleci",route:"/repo/docs/ci/circleci",frontMatter:{title:"Using Turborepo with CircleCI",description:"How to use CircleCI with Turborepo to optimize your CI workflow"}},{kind:"MdxPage",name:"github-actions",route:"/repo/docs/ci/github-actions",frontMatter:{title:"Using Turborepo with GitHub Actions",description:"How to use GitHub Actions with Turborepo to optimize your CI workflow"}},{kind:"MdxPage",name:"gitlabci",route:"/repo/docs/ci/gitlabci",frontMatter:{title:"Using Turborepo with GitLab CI",description:"How to use GitLab CI with Turborepo to optimize your CI workflow"}},{kind:"MdxPage",name:"travisci",route:"/repo/docs/ci/travisci",frontMatter:{title:"Using Turborepo with Travis CI",description:"How to use Travis CI with Turborepo to optimize your CI workflow"}}]},{kind:"MdxPage",name:"ci",route:"/repo/docs/ci",frontMatter:{title:"Continuous Integration",description:"Recipes for using Turborepo with GitHub Actions, CircleCI, and other continuous integration providers."}},{kind:"Folder",name:"core-concepts",route:"/repo/docs/core-concepts",children:[{kind:"Meta",data:{caching:"Caching Tasks","remote-caching":"Remote Caching",monorepos:"Monorepos",scopes:{display:"hidden"}}},{kind:"MdxPage",name:"caching",route:"/repo/docs/core-concepts/caching",frontMatter:{title:"Caching",description:"Caching allows Turborepo to skip work that's already been done, for the fastest builds."}},{kind:"Folder",name:"monorepos",route:"/repo/docs/core-concepts/monorepos",children:[{kind:"Meta",data:{"running-tasks":"Running Tasks",filtering:"Filtering Workspaces"}},{kind:"MdxPage",name:"filtering",route:"/repo/docs/core-concepts/monorepos/filtering",frontMatter:{title:"Filtering Workspaces",description:"Only build the workspaces you care about"}},{kind:"MdxPage",name:"running-tasks",route:"/repo/docs/core-concepts/monorepos/running-tasks",frontMatter:{title:"Running Tasks",description:"Turborepo helps you specify task dependencies declaratively."}}]},{kind:"MdxPage",name:"monorepos",route:"/repo/docs/core-concepts/monorepos"},{kind:"MdxPage",name:"remote-caching",route:"/repo/docs/core-concepts/remote-caching",frontMatter:{title:"Remote Caching",description:"Share cache artifacts across machines for even faster builds."}},{kind:"MdxPage",name:"scopes",route:"/repo/docs/core-concepts/scopes",frontMatter:{title:"Scoped tasks",description:"Even faster Turborepo builds with scoped tasks.",searchable:!1}}]},{kind:"MdxPage",name:"faq",route:"/repo/docs/faq",frontMatter:{title:"Frequently Asked Questions",description:"Frequently asked questions about Turborepo."}},{kind:"Folder",name:"getting-started",route:"/repo/docs/getting-started",children:[{kind:"Meta",data:{"add-to-project":"Add to Existing Project","create-new":"Create a New Monorepo","existing-monorepo":"Add to Existing Monorepo"}},{kind:"MdxPage",name:"add-to-project",route:"/repo/docs/getting-started/add-to-project"},{kind:"MdxPage",name:"create-new",route:"/repo/docs/getting-started/create-new",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}},{kind:"MdxPage",name:"existing-monorepo",route:"/repo/docs/getting-started/existing-monorepo",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}}]},{kind:"Folder",name:"handbook",route:"/repo/docs/handbook",children:[{kind:"Meta",data:{"what-is-a-monorepo":"What is a Monorepo?","package-installation":"Package Installation",workspaces:"Workspaces","migrating-to-a-monorepo":"Migrating to a Monorepo",dev:"Development Tasks","building-your-app":"Building Your App","deploying-with-docker":"Deploying with Docker","sharing-code":"Sharing Code",linting:"Linting",testing:"Testing","publishing-packages":"Publishing Packages",troubleshooting:"Troubleshooting"}},{kind:"MdxPage",name:"building-your-app",route:"/repo/docs/handbook/building-your-app"},{kind:"MdxPage",name:"deploying-with-docker",route:"/repo/docs/handbook/deploying-with-docker"},{kind:"MdxPage",name:"dev",route:"/repo/docs/handbook/dev"},{kind:"Folder",name:"linting",route:"/repo/docs/handbook/linting",children:[{kind:"Meta",data:{typescript:"TypeScript",eslint:"ESLint"}},{kind:"MdxPage",name:"eslint",route:"/repo/docs/handbook/linting/eslint"},{kind:"MdxPage",name:"typescript",route:"/repo/docs/handbook/linting/typescript"}]},{kind:"MdxPage",name:"linting",route:"/repo/docs/handbook/linting"},{kind:"MdxPage",name:"migrating-to-a-monorepo",route:"/repo/docs/handbook/migrating-to-a-monorepo"},{kind:"MdxPage",name:"package-installation",route:"/repo/docs/handbook/package-installation"},{kind:"Folder",name:"publishing-packages",route:"/repo/docs/handbook/publishing-packages",children:[{kind:"Meta",data:{bundling:"Bundling","versioning-and-publishing":"Versioning and Publishing"}},{kind:"MdxPage",name:"bundling",route:"/repo/docs/handbook/publishing-packages/bundling"},{kind:"MdxPage",name:"versioning-and-publishing",route:"/repo/docs/handbook/publishing-packages/versioning-and-publishing"}]},{kind:"MdxPage",name:"publishing-packages",route:"/repo/docs/handbook/publishing-packages"},{kind:"Folder",name:"sharing-code",route:"/repo/docs/handbook/sharing-code",children:[{kind:"Meta",data:{"internal-packages":"Internal Packages"}},{kind:"MdxPage",name:"internal-packages",route:"/repo/docs/handbook/sharing-code/internal-packages"}]},{kind:"MdxPage",name:"sharing-code",route:"/repo/docs/handbook/sharing-code"},{kind:"MdxPage",name:"testing",route:"/repo/docs/handbook/testing"},{kind:"MdxPage",name:"troubleshooting",route:"/repo/docs/handbook/troubleshooting"},{kind:"MdxPage",name:"what-is-a-monorepo",route:"/repo/docs/handbook/what-is-a-monorepo"},{kind:"MdxPage",name:"workspaces",route:"/repo/docs/handbook/workspaces"}]},{kind:"MdxPage",name:"handbook",route:"/repo/docs/handbook",frontMatter:{title:"Monorepo Handbook",description:"The missing manual on how to set up and use your monorepo."}},{kind:"MdxPage",name:"index",route:"/repo/docs",frontMatter:{title:"Turborepo \u5feb\u901f\u5f00\u59cb",description:"\u521b\u5efa\u60a8\u7684\u7b2c\u4e00\u4e2a monorepo \u6216\u5c06 Turborepo \u6dfb\u52a0\u5230\u73b0\u6709\u9879\u76ee."}},{kind:"Folder",name:"reference",route:"/repo/docs/reference",children:[{kind:"Meta",data:{configuration:"Configuration Options","command-line-reference":"CLI Usage",codemods:"Codemods"}},{kind:"MdxPage",name:"codemods",route:"/repo/docs/reference/codemods",frontMatter:{title:"Turborepo Codemods",description:"To make upgrading easier, Turborepo includes codemods and migration scripts."}},{kind:"MdxPage",name:"command-line-reference",route:"/repo/docs/reference/command-line-reference",frontMatter:{title:"CLI Reference",description:"Turborepo is a high-performance build system for JavaScript and TypeScript codebases."}},{kind:"MdxPage",name:"configuration",route:"/repo/docs/reference/configuration",frontMatter:{title:"Configuration Options - turbo.json",description:"Learn how to configure Turborepo through `turbo.json`."}}]},{kind:"MdxPage",name:"troubleshooting",route:"/repo/docs/troubleshooting",frontMatter:{title:"Troubleshooting",description:"This guide aims to help you debug issues with your Turborepo builds and configuration."}},{kind:"MdxPage",name:"upgrading-to-v1",route:"/repo/docs/upgrading-to-v1",frontMatter:{title:"Upgrading to v1",description:"Learn how to upgrade to Turborepo v1, now open-source and part of Vercel."}}]},{kind:"MdxPage",name:"index",route:"/repo",frontMatter:{description:"Turborepo is a high-performance build system for JavaScript and TypeScript codebases."}}]},{kind:"MdxPage",name:"showcase",route:"/showcase",frontMatter:{headeronly:!0,searchable:!1,description:"Turborepo by Vercel is the one of the fastest growing build systems in the frontend ecosystem. It's trusted by thousands of developers in production including teams at Vercel, AWS, Netflix, Microsoft, Disney, and more."}},{kind:"MdxPage",name:"terms",route:"/terms",frontMatter:{description:"See our terms of our service and how they relate to you.",hidden:!0,headeronly:!0,container:!0,searchable:!1}}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"Filtering Workspaces",position:{start:{line:5,column:3,offset:119},end:{line:5,column:23,offset:139}}}],position:{start:{line:5,column:1,offset:117},end:{line:5,column:23,offset:139}},value:"Filtering Workspaces"},{type:"heading",depth:2,children:[{type:"text",value:"Filter Syntax",position:{start:{line:26,column:4,offset:1346},end:{line:26,column:17,offset:1359}}}],position:{start:{line:26,column:1,offset:1343},end:{line:26,column:17,offset:1359}},value:"Filter Syntax"},{type:"heading",depth:3,children:[{type:"text",value:"Multiple filters",position:{start:{line:28,column:5,offset:1365},end:{line:28,column:21,offset:1381}}}],position:{start:{line:28,column:1,offset:1361},end:{line:28,column:21,offset:1381}},value:"Multiple filters"},{type:"heading",depth:3,children:[{type:"text",value:"Filter by workspace name",position:{start:{line:36,column:5,offset:1537},end:{line:36,column:29,offset:1561}}}],position:{start:{line:36,column:1,offset:1533},end:{line:36,column:29,offset:1561}},value:"Filter by workspace name"},{type:"heading",depth:4,children:[{type:"text",value:"Scopes",position:{start:{line:58,column:6,offset:2243},end:{line:58,column:12,offset:2249}}}],position:{start:{line:58,column:1,offset:2238},end:{line:58,column:12,offset:2249}},value:"Scopes"},{type:"heading",depth:3,children:[{type:"text",value:"Include dependents of matched workspaces",position:{start:{line:67,column:5,offset:2522},end:{line:67,column:45,offset:2562}}}],position:{start:{line:67,column:1,offset:2518},end:{line:67,column:45,offset:2562}},value:"Include dependents of matched workspaces"},{type:"heading",depth:3,children:[{type:"text",value:"Include dependencies of matched workspaces",position:{start:{line:83,column:5,offset:3101},end:{line:83,column:47,offset:3143}}}],position:{start:{line:83,column:1,offset:3097},end:{line:83,column:47,offset:3143}},value:"Include dependencies of matched workspaces"},{type:"heading",depth:3,children:[{type:"text",value:"Filter by directory",position:{start:{line:99,column:5,offset:3665},end:{line:99,column:24,offset:3684}}}],position:{start:{line:99,column:1,offset:3661},end:{line:99,column:24,offset:3684}},value:"Filter by directory"},{type:"heading",depth:4,children:[{type:"text",value:"Combining with other syntaxes",position:{start:{line:111,column:6,offset:3953},end:{line:111,column:35,offset:3982}}}],position:{start:{line:111,column:1,offset:3948},end:{line:111,column:35,offset:3982}},value:"Combining with other syntaxes"},{type:"heading",depth:3,children:[{type:"text",value:"Filter by changed workspaces",position:{start:{line:121,column:5,offset:4224},end:{line:121,column:33,offset:4252}}}],position:{start:{line:121,column:1,offset:4220},end:{line:121,column:33,offset:4252}},value:"Filter by changed workspaces"},{type:"heading",depth:4,children:[{type:"text",value:"Check a range of commits",position:{start:{line:132,column:6,offset:4573},end:{line:132,column:30,offset:4597}}}],position:{start:{line:132,column:1,offset:4568},end:{line:132,column:30,offset:4597}},value:"Check a range of commits"},{type:"heading",depth:4,children:[{type:"text",value:"Ignoring changed files",position:{start:{line:141,column:6,offset:4887},end:{line:141,column:28,offset:4909}}}],position:{start:{line:141,column:1,offset:4882},end:{line:141,column:28,offset:4909}},value:"Ignoring changed files"},{type:"heading",depth:4,children:[{type:"text",value:"Combining with other syntaxes",position:{start:{line:145,column:6,offset:5083},end:{line:145,column:35,offset:5112}}}],position:{start:{line:145,column:1,offset:5078},end:{line:145,column:35,offset:5112}},value:"Combining with other syntaxes"},{type:"heading",depth:3,children:[{type:"text",value:"The workspace root",position:{start:{line:169,column:5,offset:5885},end:{line:169,column:23,offset:5903}}}],position:{start:{line:169,column:1,offset:5881},end:{line:169,column:23,offset:5903}},value:"The workspace root"},{type:"heading",depth:3,children:[{type:"text",value:"Excluding workspaces",position:{start:{line:178,column:5,offset:6067},end:{line:178,column:25,offset:6087}}}],position:{start:{line:178,column:1,offset:6063},end:{line:178,column:25,offset:6087}},value:"Excluding workspaces"}],unstable_flexsearch:!0};globalThis.__nextra_internal__={pageMap:k.pageMap,route:k.route};function b(e){var n=Object.assign({h1:"h1",p:"p",code:"code",strong:"strong",ul:"ul",li:"li",a:"a",h2:"h2",h3:"h3",div:"div",pre:"pre",span:"span",h4:"h4"},(0,d.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{children:"Filtering Workspaces"}),"\n",(0,a.jsxs)(n.p,{children:["A monorepo can contain hundreds, or thousands, of workspaces. By default, running ",(0,a.jsx)(n.code,{children:"turbo run test"})," will execute the ",(0,a.jsx)(n.code,{children:"test"})," task in ",(0,a.jsx)(n.strong,{children:"all available workspaces"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(p(),{alt:"Without using a filter, test will be run across all packages",placeholder:"blur",src:h})}),"\n",(0,a.jsxs)(n.p,{children:["Turborepo supports a ",(0,a.jsx)(n.code,{children:"--filter"})," flag that lets you ",(0,a.jsx)(n.strong,{children:"select the workspaces you'd like to execute your task in"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(p(),{alt:"With a filter on shared, only the shared package runs test",placeholder:"blur",src:u})}),"\n",(0,a.jsx)(n.p,{children:"You can use it to:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Filter by ",(0,a.jsx)(n.a,{href:"#filter-by-workspace-name",children:"workspace name"})]}),"\n",(0,a.jsxs)(n.li,{children:["Filter by ",(0,a.jsx)(n.a,{href:"#filter-by-directory",children:"workspace directory"})]}),"\n",(0,a.jsxs)(n.li,{children:["Include ",(0,a.jsx)(n.a,{href:"#include-dependents-of-matched-workspaces",children:"dependents"})," and ",(0,a.jsx)(n.a,{href:"#include-dependencies-of-matched-workspaces",children:"dependencies"})," of matched workspaces"]}),"\n",(0,a.jsxs)(n.li,{children:["Execute tasks from the ",(0,a.jsx)(n.a,{href:"#the-workspace-root",children:"workspace root"})]}),"\n",(0,a.jsxs)(n.li,{children:["Filter by ",(0,a.jsx)(n.a,{href:"#filter-by-changed-workspaces",children:"changes in git history"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"#excluding-workspaces",children:"Exclude workspaces"})," from selection"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Turborepo will run each task against each matched workspace, ensuring that any tasks which depend on it are run first, according to the ",(0,a.jsx)(n.code,{children:"pipeline"})," specification in ",(0,a.jsx)(n.a,{href:"/docs/reference/configuration#pipeline",children:(0,a.jsx)(n.code,{children:"turbo.json"})}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"filter-syntax",children:"Filter Syntax"}),"\n",(0,a.jsx)(n.h3,{id:"multiple-filters",children:"Multiple filters"}),"\n",(0,a.jsxs)(n.p,{children:["You can specify more than one filter by passing multiple ",(0,a.jsx)(n.code,{children:"--filter"})," flags to the command:"]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{"data-language":"sh","data-theme":"default",children:(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=my-pkg --filter=my-app"})})})})}),"\n",(0,a.jsx)(n.h3,{id:"filter-by-workspace-name",children:"Filter by workspace name"}),"\n",(0,a.jsxs)(n.p,{children:["When you want to run a script in only one workspace, you can use a single filter: ",(0,a.jsx)(n.code,{children:"--filter=my-pkg"}),"."]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build 'my-pkg', letting `turbo` infer task dependencies"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# from the pipeline defined in turbo.json"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=my-pkg"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:" "}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build '@acme/bar', letting `turbo` infer task dependencies"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# from the pipeline defined in turbo.json"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=@acme/bar"})})]})})}),"\n",(0,a.jsxs)(n.p,{children:["If you want to run tasks inside several workspaces with similar names, you can use glob syntax: ",(0,a.jsx)(n.code,{children:"--filter=*my-pkg*"}),"."]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build all workspaces that start with 'admin-', letting turbo infer task"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# dependencies from the pipeline defined in turbo.json"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=admin-"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"})]})]})})}),"\n",(0,a.jsx)(n.h4,{id:"scopes",children:"Scopes"}),"\n",(0,a.jsxs)(n.p,{children:["Some monorepos prepend their workspace names with a scope, such as ",(0,a.jsx)(n.code,{children:"@acme/ui"})," and ",(0,a.jsx)(n.code,{children:"@acme/app"}),". As long as the scope (",(0,a.jsx)(n.code,{children:"@acme"}),") is unique across the codebase, you may omit it from filters."]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"diff","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"#EF6270"},children:"- turbo run build --filter=@acme/ui"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"#4BB74A"},children:"+ turbo run build --filter=ui"})})]})})}),"\n",(0,a.jsx)(n.h3,{id:"include-dependents-of-matched-workspaces",children:"Include dependents of matched workspaces"}),"\n",(0,a.jsxs)(n.p,{children:["Sometimes, you'll want to ensure that your shared package isn't affecting any downstream dependencies. For that, you can use ",(0,a.jsx)(n.code,{children:"--filter=...my-lib"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["If ",(0,a.jsx)(n.code,{children:"my-app"})," depends on ",(0,a.jsx)(n.code,{children:"my-lib"}),", ",(0,a.jsx)(n.code,{children:"...my-lib"})," will select ",(0,a.jsx)(n.code,{children:"my-app"})," and ",(0,a.jsx)(n.code,{children:"my-lib"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Including a ",(0,a.jsx)(n.code,{children:"^"})," (",(0,a.jsx)(n.code,{children:"...^my-lib"}),") will select all of ",(0,a.jsx)(n.code,{children:"my-lib"}),"'s dependents, but not ",(0,a.jsx)(n.code,{children:"my-lib"})," itself."]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Test 'my-lib' and everything that depends on 'my-lib'"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"test"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" --filter=...my-lib"})]}),"\n",(0,a.jsx)(n.span,{className:"line",children:" "}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Test everything that depends on 'my-lib', but not 'my-lib' itself"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"test"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" --filter=...^my-lib"})]})]})})}),"\n",(0,a.jsx)(n.h3,{id:"include-dependencies-of-matched-workspaces",children:"Include dependencies of matched workspaces"}),"\n",(0,a.jsxs)(n.p,{children:["Sometimes, you'll want to make sure that ",(0,a.jsx)(n.code,{children:"build"})," is run in all of the dependencies of the lib you're targeting. For that, you can use ",(0,a.jsx)(n.code,{children:"--filter=my-app..."}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["If ",(0,a.jsx)(n.code,{children:"my-app"})," depends on ",(0,a.jsx)(n.code,{children:"my-lib"}),", ",(0,a.jsx)(n.code,{children:"my-app..."})," will select ",(0,a.jsx)(n.code,{children:"my-app"})," and ",(0,a.jsx)(n.code,{children:"my-lib"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Including a ",(0,a.jsx)(n.code,{children:"^"})," (",(0,a.jsx)(n.code,{children:"my-app^..."}),") will select all of ",(0,a.jsx)(n.code,{children:"my-app"}),"'s dependencies, but not ",(0,a.jsx)(n.code,{children:"my-app"})," itself."]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build 'my-app' and its dependencies"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=my-app..."})}),"\n",(0,a.jsx)(n.span,{className:"line",children:" "}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build 'my-app's dependencies, but not 'my-app' itself"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=my-app^..."})})]})})}),"\n",(0,a.jsx)(n.h3,{id:"filter-by-directory",children:"Filter by directory"}),"\n",(0,a.jsx)(n.p,{children:"Useful for when you want to target a specific directory, not a workspace name. It supports:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Exact matches: ",(0,a.jsx)(n.code,{children:"--filter=./apps/docs"})]}),"\n",(0,a.jsxs)(n.li,{children:["Globs: ",(0,a.jsx)(n.code,{children:"--filter=./apps/*"})]}),"\n"]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build all of the workspaces in the 'apps' directory"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=./apps/"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"})]})]})})}),"\n",(0,a.jsx)(n.h4,{id:"combining-with-other-syntaxes",children:"Combining with other syntaxes"}),"\n",(0,a.jsxs)(n.p,{children:["When combining directory filters with other syntaxes, enclose in ",(0,a.jsx)(n.code,{children:"{}"}),". For example:"]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build all of the workspaces in the 'libs' directory,"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# and all the workspaces that depends on them"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=...{./libs/"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"})]})]})})}),"\n",(0,a.jsx)(n.h3,{id:"filter-by-changed-workspaces",children:"Filter by changed workspaces"}),"\n",(0,a.jsxs)(n.p,{children:["You can run tasks on any workspaces which have changed since a certain commit. These need to be wrapped in ",(0,a.jsx)(n.code,{children:"[]"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["For example, ",(0,a.jsx)(n.code,{children:"--filter=[HEAD^1]"})," will select all workspaces that have changed in the most recent commit:"]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Test everything that changed in the last commit"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"test"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" --filter=[HEAD^1]"})]})]})})}),"\n",(0,a.jsx)(n.h4,{id:"check-a-range-of-commits",children:"Check a range of commits"}),"\n",(0,a.jsxs)(n.p,{children:["If you need to check a specific range of commits, rather than comparing to ",(0,a.jsx)(n.code,{children:"HEAD"}),", you can set both ends of the comparison via ",(0,a.jsx)(n.code,{children:"[<from commit>...<to commit>]"}),"."]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Test each workspace that changed between 'main' and 'my-feature'"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"test"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" --filter=[main...my-feature]"})]})]})})}),"\n",(0,a.jsx)(n.h4,{id:"ignoring-changed-files",children:"Ignoring changed files"}),"\n",(0,a.jsxs)(n.p,{children:["You can use ",(0,a.jsx)(n.a,{href:"/docs/reference/command-line-reference#--ignore",children:(0,a.jsx)(n.code,{children:"--ignore"})})," to specify changed files to be ignored in the calculation of which workspaces have changed."]}),"\n",(0,a.jsx)(n.h4,{id:"combining-with-other-syntaxes-1",children:"Combining with other syntaxes"}),"\n",(0,a.jsxs)(n.p,{children:["You can additionally prepend the commit reference with ",(0,a.jsx)(n.code,{children:"..."})," to match the dependencies of other components\nagainst the changed workspaces. For instance, to select ",(0,a.jsx)(n.code,{children:"foo"})," if any of ",(0,a.jsx)(n.code,{children:"foo"}),"'s dependencies have changed in the last commit,\nyou can pass ",(0,a.jsx)(n.code,{children:"--filter=foo...[HEAD^1]"}),"."]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build everything that depends on changes in branch 'my-feature'"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=...[origin/my-feature]"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:" "}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build '@foo/bar' if it or any of its dependencies"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# changed in the last commit"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=@foo/bar...[HEAD^1]"})})]})})}),"\n",(0,a.jsxs)(n.p,{children:["You can even combine ",(0,a.jsx)(n.code,{children:"[]"})," and ",(0,a.jsx)(n.code,{children:"{}"})," syntax together:"]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Test each workspace in the '@scope' scope that"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# is in the 'packages' directory, if it has"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# changed in the last commit"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"test"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" --filter=@scope/"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"{./packages/"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}[HEAD^1]"})]})]})})}),"\n",(0,a.jsx)(n.h3,{id:"the-workspace-root",children:"The workspace root"}),"\n",(0,a.jsxs)(n.p,{children:["The monorepo's root can be selected using the token ",(0,a.jsx)(n.code,{children:"//"}),"."]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:'# Run the format script from the root "package.json" file:'})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run format --filter=//"})})]})})}),"\n",(0,a.jsx)(n.h3,{id:"excluding-workspaces",children:"Excluding workspaces"}),"\n",(0,a.jsxs)(n.p,{children:["Prepend ",(0,a.jsx)(n.code,{children:"!"})," to the filter. Matched workspaces from the entire filter will be excluded from the set of targets.\nFor example, match everything except ",(0,a.jsx)(n.code,{children:"@foo/bar"}),": ",(0,a.jsx)(n.code,{children:"--filter=!@foo/bar"}),". Note that you may need to escape ",(0,a.jsx)(n.code,{children:"!"})," as appropriate for your shell (e.g. ",(0,a.jsx)(n.code,{children:"\\!"}),")."]}),"\n",(0,a.jsx)(n.div,{"data-rehype-pretty-code-fragment":"",children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{"data-language":"sh","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build everything except '@foo/bar'"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"@foo/bar"})]}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Build all of the workspaces in the 'apps' directory, except the 'admin' workspace"})}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"turbo run build --filter=./apps/"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" --filter="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"admin"})]})]})})}),"\n",(0,a.jsx)(m.Z,{type:"idea",icon:(0,a.jsx)(f(),{className:"mt-1 h-5 w-5 text-gray-400","aria-hidden":"true"}),children:(0,a.jsxs)(n.p,{children:["Turborepo's Filter API design and docs were/are inspired by\n",(0,a.jsx)(n.a,{href:"https://pnpm.io/filtering",children:"pnpm"})]})})]})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,d.ah)(),e.components),t=n.wrapper;return t?(0,a.jsx)(t,(0,i.Z)((0,r.Z)({},e),{children:(0,a.jsx)(b,(0,r.Z)({},e))})):b(e)}k.title="Filtering Workspaces";(o=globalThis).__nextra_pageContext__||(o.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/repo/docs/core-concepts/monorepos/filtering"]={Content:function(e){return(0,a.jsx)(s.mK.Provider,{value:e,children:(0,a.jsx)(y,{})})},pageOpts:k,themeConfig:c.Z}}},function(e){e.O(0,[8002,8583,9774,2888,179],(function(){return n=9317,e(e.s=n);var n}));var n=e.O();_N_E=n}]);